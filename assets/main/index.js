window.__require=function t(e,o,n){function r(i,s){if(!o[i]){if(!e[i]){var c=i.split("/");if(c=c[c.length-1],!e[c]){var p="function"==typeof __require&&__require;if(!s&&p)return p(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+i+"'")}i=c}var l=o[i]={exports:{}};e[i][0].call(l.exports,function(t){return r(e[i][1][t]||t)},l,l.exports,t,e,o,n)}return o[i].exports}for(var a="function"==typeof __require&&__require,i=0;i<n.length;i++)r(n[i]);return r}({API:[function(t,e,o){"use strict";cc._RF.push(e,"6f8b26kstRCyZRAGGkBpDtz","API"),Object.defineProperty(o,"__esModule",{value:!0}),o.API=void 0;var n=t("./GameDefine"),r=function(){function t(){this.BASE_URL="http://104.248.97.66:8081/roseon/point-system/",this.GAME_ID="zombie_warrior",this.GAME_SESSION_ID="demo",this.URL_USER_PROFILE=null,this.URL_GAME_RESULT=null,this.URL_UPDATE_LEVEL=null,this.URL_USER_ASSET=null,this.URL_PLAY=null,this.URL_UNLOCK_CHARACTER=null,this.URL_POST_GAME_RESULT=null,this.URL_GAME_DETAILS=null,this.URL_RENT_ASSET=null,this.URL_SET_CURRENT_ASSET=null,this.mToken=n.GameDefine.IS_DEBUG?"2e60c97a6a1b4504975a4ae5acf64046":n.GameDefine.GetUrlParameter("token"),this.UpdateUrl()}return Object.defineProperty(t,"Instance",{get:function(){return this.mInstance||(this.mInstance=new t),this.mInstance},enumerable:!1,configurable:!0}),t.prototype.GetUserProfile=function(){return this.Get(this.URL_USER_PROFILE)},t.prototype.GetGameResult=function(){return this.Get(this.URL_GAME_RESULT)},t.prototype.UpdateLevel=function(t){return this.Post(this.URL_UPDATE_LEVEL,t)},t.prototype.GetUserAsset=function(){return this.Get(this.URL_USER_ASSET)},t.prototype.Play=function(){return this.Post(this.URL_PLAY)},t.prototype.UnlockCharacter=function(t){return this.Post(this.URL_UNLOCK_CHARACTER,t)},t.prototype.GetGameDetails=function(){return this.Get(this.URL_GAME_DETAILS)},t.prototype.RentAsset=function(t){return t.gameId=this.GAME_ID,this.Post(this.URL_RENT_ASSET,t)},t.prototype.SetCurrentAsset=function(t){return this.Put(this.URL_SET_CURRENT_ASSET,t)},t.prototype.UpdateUrl=function(){this.URL_USER_PROFILE=this.BASE_URL+"game/"+this.GAME_ID,this.URL_GAME_RESULT=this.BASE_URL+"game/result/"+this.GAME_ID,this.URL_UPDATE_LEVEL=this.BASE_URL+"game/result",this.URL_USER_ASSET=this.BASE_URL+"user/asset?gameId="+this.GAME_ID,this.URL_PLAY=this.BASE_URL+"game/"+this.GAME_ID+"/play",this.URL_UNLOCK_CHARACTER=this.BASE_URL+"user/asset/unlock",this.URL_POST_GAME_RESULT=this.BASE_URL+"swagger-ui/index.html#/game-result-controller/save_2",this.URL_GAME_DETAILS=this.BASE_URL+"game/details?gameId="+this.GAME_ID,this.URL_RENT_ASSET=this.BASE_URL+"user/asset/rent",this.URL_SET_CURRENT_ASSET=this.BASE_URL+"game/current-asset"},t.prototype.Get=function(t){var e=this;return new Promise(function(o){var n=new XMLHttpRequest;n.addEventListener("readystatechange",function(){4===this.readyState&&(console.log(this.responseText),o(this))}),n.open("GET",t),n.setRequestHeader("x-access-token",e.mToken),n.send()})},t.prototype.Post=function(t,e){var o=this;return void 0===e&&(e={}),new Promise(function(n){var r=new XMLHttpRequest;r.addEventListener("readystatechange",function(){4===this.readyState&&(console.log(this.responseText),n(this))}),r.open("POST",t),r.setRequestHeader("x-access-token",o.mToken),r.setRequestHeader("Content-Type","application/json"),r.send(JSON.stringify(e))})},t.prototype.Put=function(t,e){var o=this;return void 0===e&&(e={}),new Promise(function(n){var r=new XMLHttpRequest;r.addEventListener("readystatechange",function(){4===this.readyState&&(console.log(this.responseText),n(this))}),r.open("PUT",t),r.setRequestHeader("x-access-token",o.mToken),r.setRequestHeader("Content-Type","application/json"),r.send(JSON.stringify(e))})},t.mInstance=null,t}();o.API=r,cc._RF.pop()},{"./GameDefine":"GameDefine"}],AutoSnapToGrid:[function(t,e,o){"use strict";cc._RF.push(e,"ab644z5tSxOdJipHYSkKGii","AutoSnapToGrid");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=i.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.GRID_SIZE=21,e.ratio=1,e}return r(e,t),e.prototype.onLoad=function(){this.AutoSnapToGrid(this.node,this.GRID_SIZE*this.ratio)},e.prototype.AutoSnapToGrid=function(t,e){t.x=Math.round(t.x/e)*e,t.y=Math.round(t.y/e)*e},a([c(cc.Float)],e.prototype,"GRID_SIZE",void 0),a([c(cc.Float)],e.prototype,"ratio",void 0),a([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],BodyCollider:[function(t,e,o){"use strict";cc._RF.push(e,"084aa+xWsZP+aOwuPW4SAbT","BodyCollider");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.BodyCollider=void 0;var i=t("../GameDefine"),s=t("./BulletStats"),c=t("./Enemy"),p=t("./Player"),l=cc._decorator,u=l.ccclass,h=l.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mIsHead=!1,e}return r(e,t),e.prototype.start=function(){},e.prototype.onBeginContact=function(t,e,o){switch(o.tag){case i.COLLIDER_TAG.BULLET:case i.COLLIDER_TAG.EXPLOSIVE:if(null!=(r=o.getComponent(s.BulletStats))&&null!=r.GetPlayerId()){var n=cc.v2();o.body.getWorldPosition(n),null!=this.mEnemy&&r.GetCountEnter(this.mEnemy.node.uuid)<=0&&this.mEnemy.GetShot(r.GetPlayerId(),r.GetDamage(),this.mIsHead,n,o.body.linearVelocity),null!=this.mPlayer&&r.GetCountEnter(this.mPlayer.node.uuid)<=0&&this.mPlayer.GetShot(r.GetPlayerId(),r.GetDamage(),this.mIsHead,n,o.body.linearVelocity),null!=this.mEnemy&&r.AddCountEnter(this.mEnemy.node.uuid,1),null!=this.mPlayer&&r.AddCountEnter(this.mPlayer.node.uuid,1)}break;case i.COLLIDER_TAG.OBSTACLE_BOX:var r;null!=(r=o.getComponent(s.BulletStats))&&null!=r.GetPlayerId()&&(n=cc.v2(),o.body.getWorldPosition(n),null!=this.mEnemy&&r.GetCountEnter(this.mEnemy.node.uuid)<=0&&this.mEnemy.GetShot(r.GetPlayerId(),r.GetDamage(),this.mIsHead,n,o.body.linearVelocity),null!=this.mEnemy&&r.AddCountEnter(this.mEnemy.node.uuid,1))}},e.prototype.onEndContact=function(t,e,o){switch(o.tag){case i.COLLIDER_TAG.BULLET:case i.COLLIDER_TAG.EXPLOSIVE:null!=(n=o.getComponent(s.BulletStats))&&null!=n.GetPlayerId()&&(null!=this.mEnemy&&n.AddCountEnter(this.mEnemy.node.uuid,-1),null!=this.mPlayer&&n.AddCountEnter(this.mPlayer.node.uuid,-1));break;case i.COLLIDER_TAG.OBSTACLE_BOX:var n;null!=(n=o.getComponent(s.BulletStats))&&null!=n.GetPlayerId()&&null!=this.mEnemy&&n.AddCountEnter(this.mEnemy.node.uuid,-1)}},e.prototype.GetPlayerId=function(){return null==this.mPlayer?null:this.mPlayer.node.uuid},a([h(c.Enemy)],e.prototype,"mEnemy",void 0),a([h(p.Player)],e.prototype,"mPlayer",void 0),a([h(Boolean)],e.prototype,"mIsHead",void 0),a([u],e)}(cc.Component);o.BodyCollider=f,cc._RF.pop()},{"../GameDefine":"GameDefine","./BulletStats":"BulletStats","./Enemy":"Enemy","./Player":"Player"}],BotControl:[function(t,e,o){"use strict";cc._RF.push(e,"84677L6btdLNKP1YygpaBNB","BotControl");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.BotControl=void 0;var i,s=t("../GameDefine"),c=t("./Player"),p=cc._decorator,l=p.ccclass;p.property,function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.CHECK_PLAYER_READY_AIM=2]="CHECK_PLAYER_READY_AIM",t[t.DELAY_AIM=3]="DELAY_AIM",t[t.AIM=4]="AIM",t[t.SHOOT=5]="SHOOT"}(i||(i={}));var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.start=function(){this.SetState(i.INIT)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case i.INIT:this.mPlayer=this.node.getComponent(c.Player);break;case i.CHECK_PLAYER_READY_AIM:break;case i.DELAY_AIM:this.mPercent=0,this.mDelayTime=s.GameDefine.RandomInRange(.1,.2);break;case i.AIM:this.mPercent=0,this.mDelayTime=s.GameDefine.RandomInRange(1,3),this.mAimPos2=this.node.parent.convertToWorldSpaceAR(this.node.position),this.mAimPos2.x+=s.GameDefine.RandomInRange(-500,500),this.mAimPos2.y+=s.GameDefine.RandomInRange(-500,500),this.mAimPos1=new cc.Vec3(this.mAimPos2.x+s.GameDefine.RandomInRange(-500,500),this.mAimPos2.y+s.GameDefine.RandomInRange(-500,500),this.mAimPos2.z),this.mPlayer.SetAimPosition(this.mAimPos1),this.mPlayer.SetStateAim();break;case i.SHOOT:this.mPlayer.SetStateShoot()}},e.prototype.update=function(){},e.prototype.lateUpdate=function(t){switch(this.mState){case i.INIT:this.SetState(i.CHECK_PLAYER_READY_AIM);break;case i.CHECK_PLAYER_READY_AIM:this.mPlayer.IsStateReadyAim()&&this.SetState(i.DELAY_AIM);break;case i.DELAY_AIM:this.mPercent=s.GameDefine.MoveToTarget(this.mPercent,1,1/this.mDelayTime,t),this.mPercent>=1&&this.SetState(i.AIM);break;case i.AIM:this.mPercent=s.GameDefine.MoveToTarget(this.mPercent,1,1/this.mDelayTime,t),this.UpdateAim(),this.mPercent>=1&&this.SetState(i.SHOOT);break;case i.SHOOT:this.SetState(i.CHECK_PLAYER_READY_AIM)}},e.prototype.UpdateAim=function(){this.mPlayer.SetAimPosition(new cc.Vec2(s.GameDefine.LinearInterpolation(this.mPercent,this.mAimPos1.x,this.mAimPos2.x),s.GameDefine.LinearInterpolation(this.mPercent,this.mAimPos1.y,this.mAimPos2.y)))},a([l],e)}(cc.Component);o.BotControl=u,cc._RF.pop()},{"../GameDefine":"GameDefine","./Player":"Player"}],BoxNumberContainer:[function(t,e,o){"use strict";cc._RF.push(e,"4a0423lLX1CxLI4Gg/Etaen","BoxNumberContainer");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../GameDefine"),s=t("./ObstacleBoxStats"),c=cc._decorator,p=c.ccclass,l=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mHealthMax=-1,e}return r(e,t),e.prototype.onLoad=function(){i.GameDefine.AutoSnapToGrid(this.node,i.GameDefine.GRID_SIZE)},e.prototype.start=function(){var t=this.node.getComponentInChildren(s.ObstacleBoxStats);t&&this.mHealthMax>0&&t.SetHealthMax(this.mHealthMax)},a([l(cc.Integer)],e.prototype,"mHealthMax",void 0),a([p],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../GameDefine":"GameDefine","./ObstacleBoxStats":"ObstacleBoxStats"}],BoxNumberSpriteControl:[function(t,e,o){"use strict";cc._RF.push(e,"dc912OK/CBP87/uqBtgA1nA","BoxNumberSpriteControl");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./ObstacleBoxStats"),s=cc._decorator,c=s.ccclass,p=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mArrSpriteFrame=[],e.mIndex=-1,e}return r(e,t),e.prototype.start=function(){},e.prototype.update=function(){var t=this.mObstacleBoxStats.GetHealth();t=Math.min(Math.max(t,0),this.mArrSpriteFrame.length-1),this.mIndex!=t&&(this.mIndex=t,this.mSprite.spriteFrame=this.mArrSpriteFrame[this.mIndex])},a([p(i.ObstacleBoxStats)],e.prototype,"mObstacleBoxStats",void 0),a([p(cc.Sprite)],e.prototype,"mSprite",void 0),a([p({type:[cc.SpriteFrame]})],e.prototype,"mArrSpriteFrame",void 0),a([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./ObstacleBoxStats":"ObstacleBoxStats"}],BulletGravity:[function(t,e,o){"use strict";cc._RF.push(e,"2bcd8AexLpESq6zgBTAgilg","BulletGravity");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i,s=t("../GameDefine"),c=t("../MessageMgr"),p=t("./BulletStats"),l=t("./ObstacleBoxStats"),u=cc._decorator,h=u.ccclass,f=u.property;(function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.ACTIVE=2]="ACTIVE",t[t.EXPLOSIVE=3]="EXPLOSIVE",t[t.END=4]="END"})(i||(i={}));var S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mIsExplosive=!1,e}return r(e,t),e.prototype.start=function(){this.SetState(i.INIT)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case i.INIT:this.mRigidBody=this.node.getComponent(cc.RigidBody),this.mBulletStats=this.node.getComponent(p.BulletStats);var e=this.mRigidBody.getWorldRotation()/180*Math.PI;this.mRigidBody.linearVelocity=new cc.Vec2(Math.cos(e)*this.mBulletStats.GetSpeed(),-Math.sin(e)*this.mBulletStats.GetSpeed()),this.mBounceCount=this.mBulletStats.GetBounceCount(),c.MessageMgr.SendMessage(s.GAME_MESSAGE.ADD_BULLET_FLYING,1);break;case i.ACTIVE:break;case i.EXPLOSIVE:var o=cc.instantiate(this.mPrefabExplosive);o.parent=this.node.parent,o.position=this.node.position,o.getComponent(p.BulletStats).SetPlayerId(this.mBulletStats.GetPlayerId());break;case i.END:c.MessageMgr.SendMessage(s.GAME_MESSAGE.ADD_BULLET_FLYING,-1),this.node.destroy()}},e.prototype.update=function(){switch(this.mState){case i.INIT:this.SetState(i.ACTIVE);break;case i.ACTIVE:this.UpdateRotation(),this.mBounceCount<=0&&this.SetState(this.mIsExplosive?i.EXPLOSIVE:i.END);break;case i.EXPLOSIVE:this.SetState(i.END);break;case i.END:}},e.prototype.onBeginContact=function(t,e,o){switch(o.tag){case s.COLLIDER_TAG.BULLET_DESTROY_ZONE:switch(this.mState){case i.ACTIVE:this.SetState(i.END)}}},e.prototype.onEndContact=function(t,e,o){switch(o.tag){case s.COLLIDER_TAG.PLATFORM:this.mBounceCount--;break;case s.COLLIDER_TAG.OBSTACLE_BOX:this.mBounceCount--,o.node.getComponent(l.ObstacleBoxStats).AddHealth(this.mBulletStats.GetDamage())}},e.prototype.UpdateRotation=function(){var t=this.mRigidBody.linearVelocity;this.node.angle=Math.atan2(t.y,t.x)/Math.PI*180},a([f(cc.Prefab)],e.prototype,"mPrefabExplosive",void 0),a([f(cc.Boolean)],e.prototype,"mIsExplosive",void 0),a([h],e)}(cc.Component);o.default=S,cc._RF.pop()},{"../GameDefine":"GameDefine","../MessageMgr":"MessageMgr","./BulletStats":"BulletStats","./ObstacleBoxStats":"ObstacleBoxStats"}],BulletNormal:[function(t,e,o){"use strict";cc._RF.push(e,"e770eR2X5FAvaubTp6L+Dsa","BulletNormal");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.BulletNormal=void 0;var i,s=t("../GameDefine"),c=t("../MessageMgr"),p=t("./BulletStats"),l=t("./ObstacleBoxStats"),u=cc._decorator,h=u.ccclass,f=u.property;(function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.ACTIVE=2]="ACTIVE",t[t.EXPLOSIVE=3]="EXPLOSIVE",t[t.END=4]="END"})(i||(i={}));var S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mIsExplosive=!1,e}return r(e,t),e.prototype.start=function(){this.SetState(i.INIT)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case i.INIT:this.mRigidBody=this.node.getComponent(cc.RigidBody),this.mBulletStats=this.node.getComponent(p.BulletStats);var e=this.mRigidBody.getWorldRotation()/180*Math.PI;this.mRigidBody.linearVelocity=new cc.Vec2(Math.cos(e)*this.mBulletStats.GetSpeed(),-Math.sin(e)*this.mBulletStats.GetSpeed()),c.MessageMgr.SendMessage(s.GAME_MESSAGE.ADD_BULLET_FLYING,1);break;case i.ACTIVE:break;case i.EXPLOSIVE:var o=cc.instantiate(this.mPrefabExplosive);o.parent=this.node.parent,o.position=this.node.position,o.getComponent(p.BulletStats).SetPlayerId(this.mBulletStats.GetPlayerId());break;case i.END:c.MessageMgr.SendMessage(s.GAME_MESSAGE.ADD_BULLET_FLYING,-1),this.node.destroy()}},e.prototype.update=function(){switch(this.mState){case i.INIT:this.SetState(i.ACTIVE);break;case i.ACTIVE:this.UpdateRotation(),this.mBulletStats.GetBounceCount()<=0&&this.SetState(this.mIsExplosive?i.EXPLOSIVE:i.END);break;case i.EXPLOSIVE:this.SetState(i.END);break;case i.END:}},e.prototype.onBeginContact=function(t,e,o){switch(o.tag){case s.COLLIDER_TAG.BULLET_DESTROY_ZONE:switch(this.mState){case i.ACTIVE:this.SetState(i.END)}break;case s.COLLIDER_TAG.PLATFORM:case s.COLLIDER_TAG.ITEM_SPLIT_BULLET:this.mBulletStats.AddBoundCount(-1);break;case s.COLLIDER_TAG.OBSTACLE_BOX:this.mBulletStats.AddBoundCount(-1),o.node.getComponent(l.ObstacleBoxStats).AddHealth(this.mBulletStats.GetDamage())}},e.prototype.onEndContact=function(t,e,o){o.tag},e.prototype.SetBounceCount=function(t){this.mBulletStats.SetBounceCount(t)},e.prototype.UpdateRotation=function(){var t=this.mRigidBody.linearVelocity;this.node.angle=Math.atan2(t.y,t.x)/Math.PI*180},a([f(cc.Prefab)],e.prototype,"mPrefabExplosive",void 0),a([f(cc.Boolean)],e.prototype,"mIsExplosive",void 0),a([h],e)}(cc.Component);o.BulletNormal=S,cc._RF.pop()},{"../GameDefine":"GameDefine","../MessageMgr":"MessageMgr","./BulletStats":"BulletStats","./ObstacleBoxStats":"ObstacleBoxStats"}],BulletSplitControl:[function(t,e,o){"use strict";cc._RF.push(e,"bca5281LGNIioz9+NULyLwY","BulletSplitControl");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.BulletSplitControl=void 0;var i=t("./BulletStats"),s=cc._decorator,c=s.ccclass,p=s.property,l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.SplitBullet=function(t,e){for(var o=0;o<t-1;o++){var n=cc.instantiate(this.mBulletPrefab);n.parent=this.node.parent,n.x=this.node.x,n.y=this.node.y;var r=(o%2==0?1:-1)*(Math.floor(o/2)+1)*e;n.angle=this.node.angle+r;try{this.node.getComponent(i.BulletStats).CloneBulletStats(n.getComponent(i.BulletStats))}catch(a){console.log("clone bullet stats error"),console.log(a)}}},a([p(cc.Prefab)],e.prototype,"mBulletPrefab",void 0),a([c],e)}(cc.Component);o.BulletSplitControl=l,cc._RF.pop()},{"./BulletStats":"BulletStats"}],BulletSplitSub:[function(t,e,o){"use strict";cc._RF.push(e,"dcceb7HW3ROWb5GHcMeqvFK","BulletSplitSub");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.BulletSplitSub=void 0;var i,s=t("../GameDefine"),c=t("../MessageMgr"),p=t("./BulletStats"),l=t("./ObstacleBoxStats"),u=cc._decorator,h=u.ccclass,f=u.property;(function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.ACTIVE=2]="ACTIVE",t[t.EXPLOSIVE=3]="EXPLOSIVE",t[t.END=4]="END"})(i||(i={}));var S=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.start=function(){this.SetState(i.INIT)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case i.INIT:c.MessageMgr.SendMessage(s.GAME_MESSAGE.ADD_BULLET_FLYING,1),this.mBounceCount=this.mBulletStats.GetBounceCount(),this.mRigidBody.linearVelocity=new cc.Vec2(this.mBulletStats.GetSpeed()*Math.cos(this.mStartAngleSpeed/180*Math.PI),this.mBulletStats.GetSpeed()*Math.sin(this.mStartAngleSpeed/180*Math.PI));break;case i.ACTIVE:break;case i.EXPLOSIVE:var e=cc.instantiate(this.mPrefabExplosive);e.parent=this.node.parent,e.position=this.node.position,e.getComponent(p.BulletStats).SetPlayerId(this.mBulletStats.GetPlayerId());break;case i.END:c.MessageMgr.SendMessage(s.GAME_MESSAGE.ADD_BULLET_FLYING,-1),this.node.destroy()}},e.prototype.update=function(){switch(this.mState){case i.INIT:this.SetState(i.ACTIVE);break;case i.ACTIVE:this.mBounceCount<=0&&this.SetState(i.EXPLOSIVE);break;case i.EXPLOSIVE:this.SetState(i.END);break;case i.END:}},e.prototype.onBeginContact=function(t,e,o){switch(o.tag){case s.COLLIDER_TAG.BULLET_DESTROY_ZONE:switch(this.mState){case i.ACTIVE:this.SetState(i.END)}}},e.prototype.onEndContact=function(t,e,o){switch(o.tag){case s.COLLIDER_TAG.PLATFORM:this.mBounceCount--;break;case s.COLLIDER_TAG.OBSTACLE_BOX:this.mBounceCount--,o.node.getComponent(l.ObstacleBoxStats).AddHealth(this.mBulletStats.GetDamage())}},e.prototype.SetSpeedAngle=function(t){this.mStartAngleSpeed=t},a([f(cc.RigidBody)],e.prototype,"mRigidBody",void 0),a([f(p.BulletStats)],e.prototype,"mBulletStats",void 0),a([f(cc.Prefab)],e.prototype,"mPrefabExplosive",void 0),a([h],e)}(cc.Component);o.BulletSplitSub=S,cc._RF.pop()},{"../GameDefine":"GameDefine","../MessageMgr":"MessageMgr","./BulletStats":"BulletStats","./ObstacleBoxStats":"ObstacleBoxStats"}],BulletSplit:[function(t,e,o){"use strict";cc._RF.push(e,"afd55bUIBhE0KuO44yapcf6","BulletSplit");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i,s=t("../GameDefine"),c=t("../MessageMgr"),p=t("./BulletStats"),l=t("./BulletSplitSub"),u=t("./ObstacleBoxStats"),h=cc._decorator,f=h.ccclass,S=h.property;(function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.ACTIVE=2]="ACTIVE",t[t.EXPLOSIVE=3]="EXPLOSIVE",t[t.END=4]="END"})(i||(i={}));var _=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.BULLET_SUB_NUMBER=3,e.BULLET_SUB_ANGLE_OFFSET=15,e}return r(e,t),e.prototype.onEnable=function(){var t=s.GameDefine.GetGameContainer();t&&(t.on(cc.Node.EventType.MOUSE_DOWN,this.OnMouseDown,this),t.on(cc.Node.EventType.TOUCH_START,this.OnMouseDown,this))},e.prototype.onDisable=function(){var t=s.GameDefine.GetGameContainer();t&&(t.off(cc.Node.EventType.MOUSE_DOWN,this.OnMouseDown,this),t.off(cc.Node.EventType.TOUCH_START,this.OnMouseDown,this))},e.prototype.start=function(){this.SetState(i.INIT)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case i.INIT:var e=this.mRigidBody.getWorldRotation()/180*Math.PI;this.mRigidBody.linearVelocity=new cc.Vec2(Math.cos(e)*this.mBulletStats.GetSpeed(),-Math.sin(e)*this.mBulletStats.GetSpeed()),this.mBounceCount=this.mBulletStats.GetBounceCount(),c.MessageMgr.SendMessage(s.GAME_MESSAGE.ADD_BULLET_FLYING,1);break;case i.ACTIVE:break;case i.EXPLOSIVE:for(var o=this.mRigidBody.linearVelocity,n=(e=Math.atan2(o.y,o.x)/Math.PI*180,0);n<this.BULLET_SUB_NUMBER;n++){var r=cc.instantiate(this.mPrefabBulletSub);r.parent=this.node.parent,r.position=this.node.position,r.getComponent(l.BulletSplitSub).SetSpeedAngle(e+(-(this.BULLET_SUB_NUMBER-1)/2+n)*this.BULLET_SUB_ANGLE_OFFSET),r.getComponent(p.BulletStats).SetPlayerId(this.mBulletStats.GetPlayerId())}break;case i.END:c.MessageMgr.SendMessage(s.GAME_MESSAGE.ADD_BULLET_FLYING,-1),this.node.destroy()}},e.prototype.update=function(){switch(this.mState){case i.INIT:this.SetState(i.ACTIVE);break;case i.ACTIVE:this.UpdateRotation(),this.mBounceCount<=0&&this.SetState(i.EXPLOSIVE);break;case i.EXPLOSIVE:this.SetState(i.END);break;case i.END:}},e.prototype.onBeginContact=function(t,e,o){switch(o.tag){case s.COLLIDER_TAG.BULLET_DESTROY_ZONE:switch(this.mState){case i.ACTIVE:this.SetState(i.END)}}},e.prototype.onEndContact=function(t,e,o){switch(o.tag){case s.COLLIDER_TAG.PLATFORM:this.mBounceCount--;break;case s.COLLIDER_TAG.OBSTACLE_BOX:this.mBounceCount--,o.node.getComponent(u.ObstacleBoxStats).AddHealth(this.mBulletStats.GetDamage())}},e.prototype.OnMouseDown=function(){switch(this.mState){case i.ACTIVE:this.mBounceCount=0}},e.prototype.UpdateRotation=function(){var t=this.mRigidBody.linearVelocity;this.node.angle=Math.atan2(t.y,t.x)/Math.PI*180},a([S(cc.RigidBody)],e.prototype,"mRigidBody",void 0),a([S(p.BulletStats)],e.prototype,"mBulletStats",void 0),a([S(cc.Prefab)],e.prototype,"mPrefabBulletSub",void 0),a([f],e)}(cc.Component);o.default=_,cc._RF.pop()},{"../GameDefine":"GameDefine","../MessageMgr":"MessageMgr","./BulletSplitSub":"BulletSplitSub","./BulletStats":"BulletStats","./ObstacleBoxStats":"ObstacleBoxStats"}],BulletStats:[function(t,e,o){"use strict";cc._RF.push(e,"406a3IY38VBUbriWMCR70aZ","BulletStats");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.BulletStats=void 0;var i=cc._decorator,s=i.ccclass,c=i.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mDamage=-1,e.mBounceCount=0,e.mSpeed=0,e.mCountEnter={},e}return r(e,t),e.prototype.CloneBulletStats=function(t){t.SetDamage(this.mDamage),t.SetBounceCount(this.mBounceCount),t.SetSpeed(this.mSpeed),t.SetPlayerId(this.mPlayerId)},e.prototype.SetPlayerId=function(t){this.mPlayerId=t},e.prototype.GetPlayerId=function(){return this.mPlayerId},e.prototype.SetDamage=function(t){this.mDamage=t},e.prototype.GetDamage=function(){return this.mDamage},e.prototype.SetBounceCount=function(t){this.mBounceCount=t},e.prototype.AddBoundCount=function(t){this.mBounceCount=Math.max(this.mBounceCount+t,0)},e.prototype.GetBounceCount=function(){return this.mBounceCount},e.prototype.SetSpeed=function(t){this.mSpeed=t},e.prototype.GetSpeed=function(){return this.mSpeed},e.prototype.GetCountEnter=function(t){return null==this.mCountEnter[t]&&(this.mCountEnter[t]=0),this.mCountEnter[t]},e.prototype.AddCountEnter=function(t,e){null!=this.mCountEnter[t]&&(this.mCountEnter[t]+=e)},a([c(cc.Float)],e.prototype,"mDamage",void 0),a([c(cc.Float)],e.prototype,"mBounceCount",void 0),a([c(cc.Float)],e.prototype,"mSpeed",void 0),a([s],e)}(cc.Component);o.BulletStats=p,cc._RF.pop()},{}],Bullet_14:[function(t,e,o){"use strict";cc._RF.push(e,"306b83KYrtPDYm/HoYnkBwE","Bullet_14");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../GameDefine"),s=t("./BulletNormal"),c=t("./BulletStats"),p=cc._decorator,l=p.ccclass,u=p.property,h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onEndContact=function(t,e,o){switch(o.tag){case i.COLLIDER_TAG.PLATFORM:case i.COLLIDER_TAG.OBSTACLE_BOX:case i.COLLIDER_TAG.ZOMBIE_HEAD:case i.COLLIDER_TAG.ZOMBIE_BODY:}},e.prototype.Shoot=function(t,e,o,n){if(t==this.mBulletStats.GetPlayerId()){var r=cc.instantiate(o);r.parent=e;var a=e.convertToNodeSpaceAR(this.node.parent.convertToWorldSpaceAR(new cc.Vec2(this.node.x,this.node.y)));r.x=a.x,r.y=a.y,r.angle=this.node.angle+n,r.getComponent(c.BulletStats).SetPlayerId(this.mBulletStats.GetPlayerId())}},a([u(s.BulletNormal)],e.prototype,"mBulletNormal",void 0),a([u(c.BulletStats)],e.prototype,"mBulletStats",void 0),a([u(cc.Prefab)],e.prototype,"mPrefabBullet",void 0),a([l],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../GameDefine":"GameDefine","./BulletNormal":"BulletNormal","./BulletStats":"BulletStats"}],Bullet_16:[function(t,e,o){"use strict";cc._RF.push(e,"3d45a+2RvFNrqDmfFAlY7KC","Bullet_16");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.Bullet_16=void 0;var i=t("../GameDefine"),s=t("./BodyCollider"),c=t("./BulletNormal"),p=t("./BulletStats"),l=cc._decorator,u=l.ccclass,h=(l.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.start=function(){this.mBulletNormal=this.node.getComponent(c.BulletNormal),this.mBulletStats=this.node.getComponent(p.BulletStats)},e.prototype.onEndContact=function(t,e,o){switch(o.tag){case i.COLLIDER_TAG.ZOMBIE_HEAD:case i.COLLIDER_TAG.ZOMBIE_BODY:this.mBulletNormal.SetBounceCount(0);break;case i.COLLIDER_TAG.PLAYER_HEAD:case i.COLLIDER_TAG.PLAYER_BODY:var n=o.node.getComponent(s.BodyCollider);if(n){var r=n.GetPlayerId();null!=r&&r!=this.mBulletStats.GetPlayerId()&&this.mBulletNormal.SetBounceCount(0)}}},a([u],e)}(cc.Component));o.Bullet_16=h,cc._RF.pop()},{"../GameDefine":"GameDefine","./BodyCollider":"BodyCollider","./BulletNormal":"BulletNormal","./BulletStats":"BulletStats"}],ButtonLevel:[function(t,e,o){"use strict";cc._RF.push(e,"20972fAqf9La5e1oQu4vBu8","ButtonLevel");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.ButtonLevel=void 0;var i=t("../GameDefine"),s=t("../MessageMgr"),c=t("../States/StateLevelList"),p=cc._decorator,l=p.ccclass,u=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mArrStar=[],e.mStarNumber=0,e}return r(e,t),e.prototype.onEnable=function(){this.node.on("click",this.OnClickButtonLevel,this)},e.prototype.onDisable=function(){this.node.off("click",this.OnClickButtonLevel,this)},e.prototype.onLoad=function(){s.MessageMgr.AddListener(this.OnMessage.bind(this),this.node.uuid)},e.prototype.start=function(){},e.prototype.OnClickButtonLevel=function(){c.StateLevelList.Instance.OnClickButtonLevel(this.mLevelNumber)},e.prototype.SetupInfo=function(t){this.mLevelNumber=t,this.mLevelNumberLabel.string=""+this.mLevelNumber},e.prototype.OnMessage=function(t,e){switch(t){case i.GAME_MESSAGE.UPDATE_LEVEL_BUTTO_STAR:e.level==this.mLevelNumber&&e.star>this.mStarNumber&&(this.mStarNumber=e.star,this.UpdateStar())}},e.prototype.UpdateStar=function(){for(var t=0;t<this.mArrStar.length;t++)this.mArrStar[t].active=t<this.mStarNumber},a([u(cc.Label)],e.prototype,"mLevelNumberLabel",void 0),a([u({type:[cc.Node]})],e.prototype,"mArrStar",void 0),a([l],e)}(cc.Component);o.ButtonLevel=h,cc._RF.pop()},{"../GameDefine":"GameDefine","../MessageMgr":"MessageMgr","../States/StateLevelList":"StateLevelList"}],CharacterCard:[function(t,e,o){"use strict";cc._RF.push(e,"c0db6HRLZJBnpEGdtMnemSO","CharacterCard");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.CharacterCard=void 0;var i,s=t("../API"),c=t("../States/StateCharacterList"),p=t("../UserProfile"),l=cc._decorator,u=l.ccclass,h=l.property;(function(t){t[t.NULL=0]="NULL",t[t.LOCK=1]="LOCK",t[t.UNLOCK=2]="UNLOCK",t[t.SELECTED=3]="SELECTED"})(i||(i={}));var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onEnable=function(){this.node.on("click",this.OnClickCharacterCard,this)},e.prototype.onDisable=function(){this.node.off("click",this.OnClickCharacterCard,this)},e.prototype.start=function(){},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case i.LOCK:this.mAvatarSprite.node.active=!1,this.mBgHighlight.active=!1,this.mTextCardNumber.string=this.mAssetInfo.card+"/"+this.mAssetInfo.maxCard;break;case i.UNLOCK:this.mAvatarSprite.node.active=!0,this.mBgHighlight.active=!1,this.mTextCardNumber.string=this.mAssetInfo.assetName;break;case i.SELECTED:this.mAvatarSprite.node.active=!0,this.mBgHighlight.active=!0,this.mTextCardNumber.string=this.mAssetInfo.assetName}},e.prototype.update=function(){switch(this.mState){case i.LOCK:case i.UNLOCK:case i.SELECTED:}},e.prototype.OnClickCharacterCard=function(){var t=this;switch(console.log("OnClickCharacterCard"),this.mState){case i.UNLOCK:p.UserProfile.Instance.SetCurrentCharacterId(this.mAssetInfo.assetId),c.StateCharacterList.Instance.SetStateSetupCharacterCardInfo();break;case i.LOCK:this.mAssetInfo.card>=this.mAssetInfo.maxCard&&s.API.Instance.UnlockCharacter({assetId:this.mAssetInfo.assetId}).then(function(e){console.log("UnlockCharacter"),console.log(e.responseText),console.log(JSON.parse(e.responseText));try{var o=JSON.parse(e.responseText);1==o.data.status&&(p.UserProfile.Instance.GetUserAsset().data.forEach(function(e){e.assetId==t.mAssetInfo.assetId&&(e.status=o.data.status)}),t.SetState(i.UNLOCK))}catch(n){}}).catch()}},e.prototype.SetupAvatarInfo=function(t){var e=this;cc.resources.load(t,cc.SpriteFrame,null,function(t,o){e.mAvatarSprite.spriteFrame=o,e.mAvatarShadowSprite.spriteFrame=o})},e.prototype.SetupUnlockInfo=function(t){this.mAssetInfo=t,this.mAssetInfo.status||this.mAssetInfo.rentStatus?this.mAssetInfo.assetId==p.UserProfile.Instance.GetCurrentCharacterId()?this.SetState(i.SELECTED):this.SetState(i.UNLOCK):this.SetState(i.LOCK)},a([h(cc.Sprite)],e.prototype,"mAvatarSprite",void 0),a([h(cc.Sprite)],e.prototype,"mAvatarShadowSprite",void 0),a([h(cc.Label)],e.prototype,"mTextCardNumber",void 0),a([h(cc.Node)],e.prototype,"mBgHighlight",void 0),a([u],e)}(cc.Component);o.CharacterCard=f,cc._RF.pop()},{"../API":"API","../States/StateCharacterList":"StateCharacterList","../UserProfile":"UserProfile"}],CharacterRentCard:[function(t,e,o){"use strict";cc._RF.push(e,"557b63ZlJxKO51DWKQ/V5ju","CharacterRentCard");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.CharacterRentCard=void 0;var i,s=t("../GameDefine"),c=t("../MessageMgr"),p=cc._decorator,l=p.ccclass,u=p.property;(function(t){t[t.NULL=0]="NULL",t[t.SHOW=1]="SHOW",t[t.HIDE=2]="HIDE"})(i||(i={}));var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onEnable=function(){this.node.on("click",this.OnClickCharacterCard,this),c.MessageMgr.AddListener(this.OnMessage.bind(this),this.node.uuid)},e.prototype.onDisable=function(){this.node.off("click",this.OnClickCharacterCard,this),c.MessageMgr.RemoveListener(this.node.uuid)},e.prototype.start=function(){},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case i.SHOW:this.mAvatarSprite.node.active=!0,this.mBgHighlight.active=!1,this.mTextCardNumber.string=""+this.mAssetInfo.rentPoint;break;case i.HIDE:this.node.active=!1}},e.prototype.update=function(){switch(this.mState){case i.SHOW:case i.HIDE:}},e.prototype.OnClickCharacterCard=function(){switch(console.log("OnClickCharacterCard"),this.mState){case i.SHOW:c.MessageMgr.SendMessage(s.GAME_MESSAGE.POPUP_RENT_CHARACTER,{assetInfo:this.mAssetInfo,spriteFrame:this.mAvatarSprite.spriteFrame})}},e.prototype.SetupAvatarInfo=function(t){var e=this;cc.resources.load(t,cc.SpriteFrame,null,function(t,o){e.mAvatarSprite.spriteFrame=o,e.mAvatarShadowSprite.spriteFrame=o})},e.prototype.SetupAssetInfo=function(t){this.mAssetInfo=t,s.GameDefine.IS_DEBUG,0==this.mAssetInfo.status&&0==this.mAssetInfo.rentStatus&&null!=this.mAssetInfo.rentPoint&&this.mAssetInfo.rentPoint>0?this.SetState(i.SHOW):this.SetState(i.HIDE)},e.prototype.OnMessage=function(t,e){switch(t){case s.GAME_MESSAGE.HIDE_CHARACTER_RENT_CARD:switch(this.mState){case i.SHOW:e.assetInfo.assetId==this.mAssetInfo.assetId&&this.SetState(i.HIDE)}}},a([u(cc.Sprite)],e.prototype,"mAvatarSprite",void 0),a([u(cc.Sprite)],e.prototype,"mAvatarShadowSprite",void 0),a([u(cc.Label)],e.prototype,"mTextCardNumber",void 0),a([u(cc.Node)],e.prototype,"mBgHighlight",void 0),a([l],e)}(cc.Component);o.CharacterRentCard=h,cc._RF.pop()},{"../GameDefine":"GameDefine","../MessageMgr":"MessageMgr"}],EnemySetup:[function(t,e,o){"use strict";cc._RF.push(e,"9d686wfn6xGf4OVSCHz5AXc","EnemySetup");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.EnemySetup=void 0;var i=t("./Enemy"),s=cc._decorator,c=s.ccclass,p=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mDirectionX=1,e.mArrMovePoint=[],e}return r(e,t),e.prototype.start=function(){var t=this.node.getComponentInChildren(i.Enemy);if(t&&(t.SetDirectionX(this.mDirectionX),this.mArrMovePoint.length>0))for(var e=0;e<this.mArrMovePoint.length;e++)t.AddMovePoint(this.mArrMovePoint[e])},a([p(cc.Integer)],e.prototype,"mDirectionX",void 0),a([p({type:[cc.Node]})],e.prototype,"mArrMovePoint",void 0),a([c],e)}(cc.Component);o.EnemySetup=l,cc._RF.pop()},{"./Enemy":"Enemy"}],EnemyStats:[function(t,e,o){"use strict";cc._RF.push(e,"c575fsP2jVAF5ZgdygxzWgS","EnemyStats");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.EnemyStats=void 0;var i=cc._decorator,s=i.ccclass,c=i.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mHealth=1,e.MOVE_SPEED=100,e}return r(e,t),e.prototype.start=function(){this.SetHealth(this.mHealth)},e.prototype.AddHealth=function(t){this.SetHealth(this.mHealth+t)},e.prototype.IsDead=function(){return this.mHealth<=0},e.prototype.GetMoveSpeed=function(){return this.MOVE_SPEED},e.prototype.SetHealth=function(t){this.mHealth=Math.max(t,0)},a([c(Number)],e.prototype,"mHealth",void 0),a([s],e)}(cc.Component);o.EnemyStats=p,cc._RF.pop()},{}],Enemy:[function(t,e,o){"use strict";cc._RF.push(e,"7095832x6JHT4GsGCuZEQkc","Enemy");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.Enemy=void 0;var i,s=t("../GameDefine"),c=t("../MessageMgr"),p=t("./EnemyStats"),l=t("./RagDoll"),u=cc._decorator,h=u.ccclass,f=u.property;(function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.DELAY=2]="DELAY",t[t.IDLE=3]="IDLE",t[t.MOVE=4]="MOVE",t[t.DEAD=5]="DEAD"})(i||(i={}));var S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mArrMovePoint=[],e}return r(e,t),e.prototype.start=function(){this.SetState(i.INIT)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case i.INIT:c.MessageMgr.SendMessage(s.GAME_MESSAGE.ADD_ENEMY,1),this.mMovePointIndex=-1;break;case i.DELAY:break;case i.IDLE:this.mSpine.setAnimation(0,"Idle",!0);break;case i.MOVE:this.mSpine.setAnimation(0,"Idle",!0),this.mMovePointIndex=(this.mMovePointIndex+1)%this.mArrMovePoint.length,this.mMoveTarget=this.mArrMovePoint[this.mMovePointIndex];break;case i.DEAD:c.MessageMgr.SendMessage(s.GAME_MESSAGE.ADD_ENEMY,-1),this.MakeRagdoll(),this.node.destroy()}},e.prototype.update=function(t){switch(this.mState){case i.INIT:this.SetState(i.DELAY);break;case i.DELAY:this.SetState(this.mArrMovePoint.length>0?i.MOVE:i.IDLE);break;case i.IDLE:break;case i.MOVE:this.UpdateMoveToTarget(t),this.SyncPositionRigidbodyInChild(),this.node.x==this.mMoveTarget.x&&this.node.y==this.mMoveTarget.y&&this.SetState(i.MOVE);break;case i.DEAD:}},e.prototype.SetDirectionX=function(t){this.node.scaleX=Math.abs(this.node.scaleX)*t,this.UpdateEnableBodyCollider()},e.prototype.GetShot=function(t,e,o,n,r){switch(this.mState){case i.IDLE:case i.MOVE:this.mEnemyStats.AddHealth(e),this.mEnemyStats.IsDead()&&(this.mBulletPhysicPos=n,this.mBulletSpeed=r,this.SetState(i.DEAD))}},e.prototype.AddMovePoint=function(t){this.mArrMovePoint.push(t)},e.prototype.SyncPositionRigidbodyInChild=function(){for(var t=this.node.getComponentsInChildren(cc.RigidBody),e=0;e<t.length;e++)t[e].syncPosition(!1)},e.prototype.UpdateEnableBodyCollider=function(){this.mContainerCollider_L.active=this.node.scaleX<0,this.mContainerCollider_R.active=this.node.scaleX>=0},e.prototype.MakeRagdoll=function(){var t=this.node.scaleX<0?this.mPrefabRagdoll_L:this.mPrefabRagdoll_R,e=cc.instantiate(t);e.parent=this.node.parent,e.position=this.node.position,e.getComponent(l.RagDoll).SetForce(this.mBulletSpeed,this.mBulletPhysicPos)},e.prototype.UpdateMoveToTarget=function(t){this.SetDirectionX(this.mMoveTarget.x>=this.node.x?1:-1);var e=this.mMoveTarget.position.add(this.node.position.mul(-1)).normalize().mul(this.mEnemyStats.GetMoveSpeed());this.node.x=s.GameDefine.MoveToTarget(this.node.x,this.mMoveTarget.x,e.x,t),this.node.y=s.GameDefine.MoveToTarget(this.node.y,this.mMoveTarget.y,e.y,t)},a([f(sp.Skeleton)],e.prototype,"mSpine",void 0),a([f(cc.Node)],e.prototype,"mContainerCollider_L",void 0),a([f(cc.Node)],e.prototype,"mContainerCollider_R",void 0),a([f(p.EnemyStats)],e.prototype,"mEnemyStats",void 0),a([f(cc.Prefab)],e.prototype,"mPrefabRagdoll_L",void 0),a([f(cc.Prefab)],e.prototype,"mPrefabRagdoll_R",void 0),a([h],e)}(cc.Component);o.Enemy=S,cc._RF.pop()},{"../GameDefine":"GameDefine","../MessageMgr":"MessageMgr","./EnemyStats":"EnemyStats","./RagDoll":"RagDoll"}],Explosive:[function(t,e,o){"use strict";cc._RF.push(e,"cdd18mhhy1BkLQhMCFnIsOf","Explosive");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i,s=t("../GameDefine"),c=t("../MessageMgr"),p=t("./BulletStats"),l=t("./ObstacleBoxStats"),u=cc._decorator,h=u.ccclass;u.property,function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.ACTIVE=2]="ACTIVE",t[t.END=3]="END"}(i||(i={}));var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mIsAnimationComplete=!1,e}return r(e,t),e.prototype.start=function(){this.SetState(i.INIT)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case i.INIT:c.MessageMgr.SendMessage(s.GAME_MESSAGE.ADD_BULLET_FLYING,1),this.mBulletStats=this.node.getComponent(p.BulletStats);break;case i.ACTIVE:break;case i.END:c.MessageMgr.SendMessage(s.GAME_MESSAGE.ADD_BULLET_FLYING,-1),this.node.destroy()}},e.prototype.update=function(){switch(this.mState){case i.INIT:this.SetState(i.ACTIVE);break;case i.ACTIVE:this.mIsAnimationComplete&&this.SetState(i.END);break;case i.END:}},e.prototype.OnAnimationComplete=function(){this.mIsAnimationComplete=!0},e.prototype.onEndContact=function(t,e,o){switch(o.tag){case s.COLLIDER_TAG.OBSTACLE_BOX:o.node.getComponent(l.ObstacleBoxStats).AddHealth(this.mBulletStats.GetDamage())}},a([h],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../GameDefine":"GameDefine","../MessageMgr":"MessageMgr","./BulletStats":"BulletStats","./ObstacleBoxStats":"ObstacleBoxStats"}],GameDefine:[function(t,e,o){"use strict";cc._RF.push(e,"08b35U6NHVOx4wUFRw6kkob","GameDefine"),Object.defineProperty(o,"__esModule",{value:!0}),o.COLLIDER_TAG=o.GAME_MESSAGE=o.GameDefine=void 0;var n=function(){function t(){}return t.GetCanvasGame=function(){return cc.find("CanvasGame")},t.GetGameContainer=function(){return cc.find("CanvasGame/GameContainer")},t.CanvasGameUpdateAlignment=function(){var t=this.GetCanvasGame();if(null!=t){var e=t.getComponent(cc.Widget);null!=e&&e.updateAlignment()}},t.ConsoleLogVec2=function(t){console.log(Math.round(t.x),Math.round(t.y))},t.MoveToTarget=function(t,e,o,n){return o=Math.abs(o),t<e?Math.min(t+o*n,e):t>e?Math.max(t-o*n,e):t},t.ConfuseArray=function(t,e){if(void 0===e&&(e=10),t.length<=1)return t;for(var o=0;o<e;o++){var n=Math.floor(Math.random()*t.length),r=Math.floor(Math.random()*t.length),a=t[n];t[n]=t[r],t[r]=a}return t},t.Clamp=function(t,e,o){var n=Math.max(e,o),r=Math.min(e,o);return t>n?n:t<r?r:t},t.RandomInRange=function(t,e){return t+Math.random()*(e-t)},t.AutoSnapToGrid=function(t,e){t.x=Math.round(t.x/e)*e,t.y=Math.round(t.y/e)*e},t.LinearInterpolation=function(t,e,o){return e+t*(o-e)},t.GetUrlParameter=function(t){var e=window.location.href,o=new URL(e).searchParams.get(t);return console.log("GetUrlParameter",t,o),o},t.IS_DEBUG=!1,t.GRID_SIZE=21,t}();o.GameDefine=n,function(t){t[t.STATE_END_GAME_WIN=0]="STATE_END_GAME_WIN",t[t.STATE_END_GAME_LOSE=1]="STATE_END_GAME_LOSE",t[t.STATE_DUEL_MODE_BET=2]="STATE_DUEL_MODE_BET",t[t.STATE_DUEL_MODE=3]="STATE_DUEL_MODE",t[t.STATE_DUEL_MODE_WIN=4]="STATE_DUEL_MODE_WIN",t[t.STATE_DUEL_MODE_LOSE=5]="STATE_DUEL_MODE_LOSE",t[t.STATE_DUEL_MODE_DRAW=6]="STATE_DUEL_MODE_DRAW",t[t.ADD_TO_PLAYER_LIST=7]="ADD_TO_PLAYER_LIST",t[t.REMOVE_FROM_PLAYER_LIST=8]="REMOVE_FROM_PLAYER_LIST",t[t.ADD_TO_SHOOT_LIST=9]="ADD_TO_SHOOT_LIST",t[t.REMOVE_FROM_SHOOT_LIST=10]="REMOVE_FROM_SHOOT_LIST",t[t.START_PLAYER_TURN=11]="START_PLAYER_TURN",t[t.END_PLAYER_TURN=12]="END_PLAYER_TURN",t[t.PLAYER_ANIMATION_IDLE=13]="PLAYER_ANIMATION_IDLE",t[t.PLAYER_ANIMATION_AIM=14]="PLAYER_ANIMATION_AIM",t[t.PLAYER_ANIMATION_WALK=15]="PLAYER_ANIMATION_WALK",t[t.PLAYER_START_AIM=16]="PLAYER_START_AIM",t[t.PLAYER_END_AIM=17]="PLAYER_END_AIM",t[t.PLAYER_WIN=18]="PLAYER_WIN",t[t.PLAYER_LOSE=19]="PLAYER_LOSE",t[t.AIM_POSITION=20]="AIM_POSITION",t[t.AIM_RAY_INFO=21]="AIM_RAY_INFO",t[t.ADD_BULLET_FLYING=22]="ADD_BULLET_FLYING",t[t.ADD_ENEMY=23]="ADD_ENEMY",t[t.BULLET_INFO=24]="BULLET_INFO",t[t.DUEL_MODE_DETECT_RESULT=25]="DUEL_MODE_DETECT_RESULT",t[t.DUEL_MODE_WIN=26]="DUEL_MODE_WIN",t[t.DUEL_MODE_LOSE=27]="DUEL_MODE_LOSE",t[t.BULLET_UI_AMOUT_OF_BULLET_MAX=28]="BULLET_UI_AMOUT_OF_BULLET_MAX",t[t.PLATFORM_SWITCH=29]="PLATFORM_SWITCH",t[t.UPDATE_LEVEL_BUTTO_STAR=30]="UPDATE_LEVEL_BUTTO_STAR",t[t.HIDE_CHARACTER_RENT_CARD=31]="HIDE_CHARACTER_RENT_CARD",t[t.POPUP_NOT_ENOUGH_POINT=32]="POPUP_NOT_ENOUGH_POINT",t[t.POPUP_RENT_CHARACTER=33]="POPUP_RENT_CHARACTER",t[t.POPUP_ASSET_ERROR=34]="POPUP_ASSET_ERROR"}(o.GAME_MESSAGE||(o.GAME_MESSAGE={})),o.COLLIDER_TAG={PLATFORM:1,BULLET_DESTROY_ZONE:2,BULLET:11,EXPLOSIVE:12,OBSTACLE_BOX:21,ZOMBIE_HEAD:31,ZOMBIE_BODY:32,PLAYER_HEAD:41,PLAYER_BODY:42,ITEM_SPLIT_BULLET:51},cc._RF.pop()},{}],GameSetup:[function(t,e,o){"use strict";cc._RF.push(e,"8c7e3ctRExBHZASntnI+d/v","GameSetup");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./GameDefine"),s=cc._decorator,c=s.ccclass,p=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onLoad=function(){console.log("game ver 1"+(i.GameDefine.IS_DEBUG?"d":"p")),this.SetupPhysic()},e.prototype.SetupPhysic=function(){cc.director.getPhysicsManager().enabled=!0,i.GameDefine.IS_DEBUG&&(cc.director.getPhysicsManager().debugDrawFlags=cc.PhysicsManager.DrawBits.e_aabbBit|cc.PhysicsManager.DrawBits.e_jointBit|cc.PhysicsManager.DrawBits.e_shapeBit)},a([c],e)}(cc.Component));o.default=p,cc._RF.pop()},{"./GameDefine":"GameDefine"}],ItemSplitBullet:[function(t,e,o){"use strict";cc._RF.push(e,"341a5ubsyNHhZxe+PI8ND4O","ItemSplitBullet");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.ItemSplitBullet=void 0;var i=t("../GameDefine"),s=t("./BulletSplitControl"),c=cc._decorator,p=c.ccclass,l=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mSplitNumber=3,e.mOffsetAngle=10,e}return r(e,t),e.prototype.onEndContact=function(t,e,o){switch(o.tag){case i.COLLIDER_TAG.BULLET:var n=o.node.getComponent(s.BulletSplitControl);n&&n.SplitBullet(this.mSplitNumber,this.mOffsetAngle)}},e.prototype.GetSplitNumber=function(){return this.mSplitNumber},e.prototype.GetOffsetAngle=function(){return this.mOffsetAngle},a([l(cc.Integer)],e.prototype,"mSplitNumber",void 0),a([l(cc.Float)],e.prototype,"mOffsetAngle",void 0),a([p],e)}(cc.Component);o.ItemSplitBullet=u,cc._RF.pop()},{"../GameDefine":"GameDefine","./BulletSplitControl":"BulletSplitControl"}],LevelMgr:[function(t,e,o){"use strict";cc._RF.push(e,"ef973JA221LNJUezXdxmVkK","LevelMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.LevelMgr=void 0;var i,s=t("../MessageMgr"),c=t("../States/StateDuelMode"),p=t("../States/StateIngame"),l=t("../UserProfile"),u=cc._decorator,h=u.ccclass,f=u.property;(function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.CLEAR_LEVEL=2]="CLEAR_LEVEL",t[t.IS_CLEARED_LEVEL=3]="IS_CLEARED_LEVEL",t[t.LOAD_LEVEL=4]="LOAD_LEVEL",t[t.LOAD_LEVEL_DUEL_MODE=5]="LOAD_LEVEL_DUEL_MODE",t[t.LOAD_LEVEL_FINISH=6]="LOAD_LEVEL_FINISH"})(i||(i={}));var S=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return r(e,t),o=e,Object.defineProperty(e,"Instance",{get:function(){return o.mInstance},enumerable:!1,configurable:!0}),e.prototype.onEnable=function(){s.MessageMgr.AddListener(this.OnMessage.bind(this),this.node.uuid)},e.prototype.onDisable=function(){s.MessageMgr.RemoveListener(this.node.uuid)},e.prototype.onLoad=function(){o.mInstance=this},e.prototype.start=function(){this.SetState(i.INIT)},e.prototype.SetState=function(t){var e=this;switch(this.mState=t,this.mState){case i.INIT:break;case i.CLEAR_LEVEL:this.mGameContainer.destroyAllChildren();break;case i.IS_CLEARED_LEVEL:break;case i.LOAD_LEVEL:p.StateIngame.Instance.AddCountLoadingMax(1);var o="Levels/"+l.UserProfile.Instance.GetCurrentLevelInfo().name;console.log("level name",o),cc.resources.load(o,function(t,o){cc.instantiate(o).parent=e.mGameContainer,e.SetState(i.LOAD_LEVEL_FINISH)});break;case i.LOAD_LEVEL_DUEL_MODE:c.StateDuelMode.Instance.AddCountLoadingMax(1);var n=l.UserProfile.Instance.GetMaxDuelModeLevel();o="LevelsDuelMode/LevelDuelMode_"+((n=Math.floor(Math.random()*n+1))<10?"0":"")+n,cc.resources.load(o,function(t,o){cc.instantiate(o).parent=e.mGameContainer,e.SetState(i.LOAD_LEVEL_FINISH)});break;case i.LOAD_LEVEL_FINISH:p.StateIngame.Instance.AddCountLoading(1),c.StateDuelMode.Instance.AddCountLoading(1)}},e.prototype.update=function(){switch(this.mState){case i.INIT:break;case i.CLEAR_LEVEL:this.mGameContainer.childrenCount<=0&&this.SetState(i.IS_CLEARED_LEVEL);break;case i.IS_CLEARED_LEVEL:case i.LOAD_LEVEL:case i.LOAD_LEVEL_DUEL_MODE:case i.LOAD_LEVEL_FINISH:}},e.prototype.OnMessage=function(){},e.prototype.ClearLevel=function(){this.SetState(i.CLEAR_LEVEL)},e.prototype.IsClearedLevel=function(){return this.mState==i.IS_CLEARED_LEVEL},e.prototype.LoadLevel=function(){this.SetState(i.LOAD_LEVEL)},e.prototype.LoadLevelDuelMode=function(){this.SetState(i.LOAD_LEVEL_DUEL_MODE)},e.prototype.IsLoadLevelFinish=function(){return this.mState==i.LOAD_LEVEL_FINISH},a([f(cc.Node)],e.prototype,"mGameContainer",void 0),o=a([h],e)}(cc.Component);o.LevelMgr=S,cc._RF.pop()},{"../MessageMgr":"MessageMgr","../States/StateDuelMode":"StateDuelMode","../States/StateIngame":"StateIngame","../UserProfile":"UserProfile"}],LevelSetup:[function(t,e,o){"use strict";cc._RF.push(e,"37e24o8/0tAQqxtw+AYTKUM","LevelSetup");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.LevelSetup=void 0;var i=t("./PlayerSetup"),s=t("./UIBulletMgr"),c=cc._decorator,p=c.ccclass,l=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mNumberBulletMax=3,e.mNumberStar1=0,e.mNumberStar2=1,e.mNumberStar3=2,e}return r(e,t),e.prototype.start=function(){if(this.mNumberBulletMax>0){s.UIBulletMgr.Instance.SetNumberBulletMax(this.mNumberBulletMax);for(var t=this.node.getComponentsInChildren(i.PlayerSetup),e=0;e<t.length;e++)t[e].SetBulletMax(this.mNumberBulletMax)}s.UIBulletMgr.Instance.SetStarInfo(this.mNumberStar1,this.mNumberStar2,this.mNumberStar3)},a([l(cc.Integer)],e.prototype,"mNumberBulletMax",void 0),a([l(cc.Integer)],e.prototype,"mNumberStar1",void 0),a([l(cc.Integer)],e.prototype,"mNumberStar2",void 0),a([l(cc.Integer)],e.prototype,"mNumberStar3",void 0),a([p],e)}(cc.Component);o.LevelSetup=u,cc._RF.pop()},{"./PlayerSetup":"PlayerSetup","./UIBulletMgr":"UIBulletMgr"}],MessageMgr:[function(t,e,o){"use strict";cc._RF.push(e,"0684bqrPlhKC6ZlAIhmE8+u","MessageMgr"),Object.defineProperty(o,"__esModule",{value:!0}),o.MessageMgr=void 0;var n=function(){function t(){}return t.AddListener=function(t,e){this.arrListener.push({callback:t,id:e})},t.RemoveListener=function(t){for(var e=this.arrListener.length,o=0;o<e;o++)if(null!=this.arrListener[o]&&this.arrListener[o].id==t){this.isRemoveNull=!0,this.arrListener[o]=null;break}},t.SendMessage=function(t,e){this.countCallingMessage++;for(var o=this.arrListener.length,n=0;n<o;n++)try{null!=this.arrListener[n]&&this.arrListener[n].callback(t,e)}catch(r){console.log(r)}this.countCallingMessage--,this.countCallingMessage<=0&&this.isRemoveNull&&(this.isRemoveNull=!1,this.arrListener=this.arrListener.filter(function(t){return null!=t}))},t.arrListener=[],t.countCallingMessage=0,t.isRemoveNull=!1,t}();o.MessageMgr=n,cc._RF.pop()},{}],ObstacleBombStats:[function(t,e,o){"use strict";cc._RF.push(e,"e2fdb093dlG8a6kSKlXu8Ci","ObstacleBombStats");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.ObstacleBombStats=void 0;var i=cc._decorator,s=i.ccclass,c=i.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mExplosiveScale=2,e}return r(e,t),e.prototype.start=function(){},e.prototype.GetExplosiveScale=function(){return this.mExplosiveScale},a([c(cc.Float)],e.prototype,"mExplosiveScale",void 0),a([s],e)}(cc.Component);o.ObstacleBombStats=p,cc._RF.pop()},{}],ObstacleBomb:[function(t,e,o){"use strict";cc._RF.push(e,"5204aur23VG3aUcS0QnDmT2","ObstacleBomb");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.ObstacleBomb=void 0;var i,s=t("../GameDefine"),c=t("./BulletStats"),p=t("./ObstacleBombStats"),l=cc._decorator,u=l.ccclass,h=l.property;(function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.ACTIVE=2]="ACTIVE",t[t.DELAY_EXPLOSIVE=3]="DELAY_EXPLOSIVE",t[t.EXPLOSIVE=4]="EXPLOSIVE",t[t.END=5]="END"})(i||(i={}));var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.DELAY_TIME=2,e}return r(e,t),e.prototype.start=function(){this.SetState(i.INIT)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case i.INIT:this.mObstacleBombStats=this.node.getComponent(p.ObstacleBombStats);break;case i.ACTIVE:break;case i.DELAY_EXPLOSIVE:this.mPercent=0;break;case i.EXPLOSIVE:var e=cc.instantiate(this.mPrefabExplosive);e.parent=this.node.parent,e.x=this.node.x,e.y=this.node.y;var o=this.mObstacleBombStats.GetExplosiveScale();e.scaleX*=o,e.scaleY*=o,e.getComponent(c.BulletStats).SetPlayerId(this.mPlayerId);break;case i.END:this.node.destroy()}},e.prototype.update=function(t){switch(this.mState){case i.INIT:this.SetState(i.ACTIVE);break;case i.ACTIVE:break;case i.DELAY_EXPLOSIVE:this.mPercent=s.GameDefine.MoveToTarget(this.mPercent,1,1/this.DELAY_TIME,t),this.mPercent>=1&&this.SetState(i.EXPLOSIVE);break;case i.EXPLOSIVE:this.SetState(i.END);break;case i.END:}},e.prototype.onBeginContact=function(t,e,o){switch(o.tag){case s.COLLIDER_TAG.BULLET:switch(this.mState){case i.ACTIVE:(n=o.node.getComponent(c.BulletStats))&&(this.mPlayerId=n.GetPlayerId(),this.SetState(i.DELAY_EXPLOSIVE))}break;case s.COLLIDER_TAG.EXPLOSIVE:switch(this.mState){case i.ACTIVE:var n;(n=o.node.getComponent(c.BulletStats))&&(this.mPlayerId=n.GetPlayerId(),this.SetState(i.EXPLOSIVE))}}},a([h(cc.Prefab)],e.prototype,"mPrefabExplosive",void 0),a([u],e)}(cc.Component);o.ObstacleBomb=f,cc._RF.pop()},{"../GameDefine":"GameDefine","./BulletStats":"BulletStats","./ObstacleBombStats":"ObstacleBombStats"}],ObstacleBoxStats:[function(t,e,o){"use strict";cc._RF.push(e,"99bd8NHE9VC5Ys9JbLwFOvI","ObstacleBoxStats");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.ObstacleBoxStats=void 0;var i,s=t("./ObstacleBox"),c=cc._decorator,p=c.ccclass,l=c.property;(function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.ACTIVE=2]="ACTIVE",t[t.END=3]="END"})(i||(i={}));var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.HEALTH_MAX=1,e}return r(e,t),e.prototype.start=function(){this.SetState(i.INIT)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case i.INIT:this.mObstacleBox=this.node.getComponent(s.ObstacleBox),this.SetHealth(this.HEALTH_MAX);break;case i.ACTIVE:case i.END:}},e.prototype.update=function(){switch(this.mState){case i.INIT:this.SetState(i.ACTIVE);break;case i.ACTIVE:case i.END:}},e.prototype.SetHealthMax=function(t){this.HEALTH_MAX=t},e.prototype.AddHealth=function(t){this.SetHealth(this.mHealth+t)},e.prototype.GetHealth=function(){return this.mHealth},e.prototype.SetHealth=function(t){this.mHealth=Math.min(Math.max(t,0),this.HEALTH_MAX),this.mHealth<=0&&this.mObstacleBox.SetStateBreak()},a([l(cc.Integer)],e.prototype,"HEALTH_MAX",void 0),a([p],e)}(cc.Component);o.ObstacleBoxStats=u,cc._RF.pop()},{"./ObstacleBox":"ObstacleBox"}],ObstacleBox:[function(t,e,o){"use strict";cc._RF.push(e,"e2a99eJlKtCeriwx2GzbMTv","ObstacleBox");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.ObstacleBox=void 0;var i,s=t("./BulletStats"),c=cc._decorator,p=c.ccclass,l=c.property;(function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.ACTIVE=2]="ACTIVE",t[t.BREAK=3]="BREAK",t[t.END=4]="END"})(i||(i={}));var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.start=function(){this.SetState(i.INIT)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case i.INIT:this.mBulletStats=this.node.getComponent(s.BulletStats),this.mBulletStats.SetPlayerId(this.node.uuid);break;case i.ACTIVE:break;case i.BREAK:if(this.mPrefabBreak){var e=cc.instantiate(this.mPrefabBreak);e.parent=this.node.parent,e.position=this.node.position}break;case i.END:this.node.destroy()}},e.prototype.update=function(){switch(this.mState){case i.INIT:this.SetState(i.ACTIVE);break;case i.ACTIVE:break;case i.BREAK:this.SetState(i.END);break;case i.END:}},e.prototype.SetStateBreak=function(){switch(this.mState){case i.ACTIVE:this.SetState(i.BREAK)}},a([l(cc.Prefab)],e.prototype,"mPrefabBreak",void 0),a([p],e)}(cc.Component);o.ObstacleBox=u,cc._RF.pop()},{"./BulletStats":"BulletStats"}],ParticleSystemRotate:[function(t,e,o){"use strict";cc._RF.push(e,"43022HTMqNKrIdbZPbYOW+D","ParticleSystemRotate");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=i.property,p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.update=function(){this.mParticleSystem.startRotation.constant=this.mNodeTarget.angle/180*Math.PI},a([c(cc.Node)],e.prototype,"mNodeTarget",void 0),a([c(cc.ParticleSystem3D)],e.prototype,"mParticleSystem",void 0),a([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],PlatformMovingSetup:[function(t,e,o){"use strict";cc._RF.push(e,"635d3Hm6KJMUKkATnn1CuPj","PlatformMovingSetup");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.PlatformMovingSetup=void 0;var i=t("./PlatformMoving"),s=cc._decorator,c=s.ccclass,p=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mArrEnemy=[],e.mArrMovingPoint=[],e}return r(e,t),e.prototype.start=function(){var t=this;this.node.getComponentsInChildren(i.PlatformMoving).forEach(function(e){e.SetArrEnemy(t.mArrEnemy),e.SetArrMovePoint(t.mArrMovingPoint)})},a([p({type:cc.Node})],e.prototype,"mArrEnemy",void 0),a([p({type:[cc.Node]})],e.prototype,"mArrMovingPoint",void 0),a([c],e)}(cc.Component);o.PlatformMovingSetup=l,cc._RF.pop()},{"./PlatformMoving":"PlatformMoving"}],PlatformMoving:[function(t,e,o){"use strict";cc._RF.push(e,"c02b3PxKHtLxo7J2cHwu8cZ","PlatformMoving");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.PlatformMoving=void 0;var i,s=t("../GameDefine"),c=t("./Enemy"),p=cc._decorator,l=p.ccclass;p.property,function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.IDLE=2]="IDLE",t[t.MOVE=3]="MOVE",t[t.END=4]="END"}(i||(i={}));var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.MOVE_SPEED=150,e.mArrMovePoint=[],e}return r(e,t),e.prototype.start=function(){this.SetState(i.INIT)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case i.INIT:this.mMoveIndex=-1;break;case i.IDLE:break;case i.MOVE:this.mMoveIndex=(this.mMoveIndex+1)%this.mArrMovePoint.length,this.mMoveTarget=this.mArrMovePoint[this.mMoveIndex];break;case i.END:}},e.prototype.update=function(t){switch(this.mState){case i.INIT:this.SetState(this.mArrMovePoint.length>0?i.MOVE:i.IDLE);break;case i.IDLE:break;case i.MOVE:this.UpdateMove(t),this.node.x==this.mMoveTarget.x&&this.node.y==this.mMoveTarget.y&&this.SetState(i.MOVE);break;case i.END:}},e.prototype.SetArrMovePoint=function(t){this.mArrMovePoint=t},e.prototype.SetArrEnemy=function(t){for(var e=0;e<t.length;e++){var o=t[e];o.position=this.node.convertToNodeSpaceAR(o.parent.convertToWorldSpaceAR(o.position)),t[e].parent=this.node}},e.prototype.UpdateMove=function(t){var e=this.mMoveTarget.position.add(this.node.position.mul(-1)).normalize().mul(this.MOVE_SPEED);this.node.x=s.GameDefine.MoveToTarget(this.node.x,this.mMoveTarget.x,e.x,t),this.node.y=s.GameDefine.MoveToTarget(this.node.y,this.mMoveTarget.y,e.y,t);for(var o=this.node.getComponentsInChildren(c.Enemy),n=0;n<o.length;n++)o[n].SyncPositionRigidbodyInChild()},a([l],e)}(cc.Component);o.PlatformMoving=u,cc._RF.pop()},{"../GameDefine":"GameDefine","./Enemy":"Enemy"}],PlatformSwitchButtonSetup:[function(t,e,o){"use strict";cc._RF.push(e,"de467HtxdVHy4v47SPrxpFJ","PlatformSwitchButtonSetup");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=i.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return r(e,t),e.prototype.start=function(){},a([c(cc.Label)],e.prototype,"label",void 0),a([c],e.prototype,"text",void 0),a([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],PlatformSwitchButton:[function(t,e,o){"use strict";cc._RF.push(e,"0a9e5h9r59P+rdUUSuhKQLA","PlatformSwitchButton");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i,s=t("../GameDefine"),c=t("../MessageMgr"),p=cc._decorator,l=p.ccclass,u=p.property;(function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.NORMAL=2]="NORMAL",t[t.CLICKED=3]="CLICKED",t[t.END=4]="END"})(i||(i={}));var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mButtonKey="PlatformSwitch_01",e}return r(e,t),e.prototype.start=function(){this.SetState(i.INIT)},e.prototype.SetState=function(t){switch(this.mState){case i.NORMAL:this.mNodeNormal.active=!1;break;case i.CLICKED:this.mNodeClicked.active=!1}switch(this.mState=t,this.mState){case i.INIT:this.mNodeNormal.active=!1,this.mNodeClicked.active=!1;break;case i.NORMAL:this.mNodeNormal.active=!0,this.mCountHighLight=0;break;case i.CLICKED:this.mNodeClicked.active=!0,this.mCollider.enabled=!1,c.MessageMgr.SendMessage(s.GAME_MESSAGE.PLATFORM_SWITCH,this.mButtonKey);break;case i.END:}},e.prototype.update=function(t){switch(this.mState){case i.INIT:this.SetState(i.NORMAL);break;case i.NORMAL:this.UpdateHighLight(t);break;case i.CLICKED:case i.END:}},e.prototype.onBeginContact=function(t,e,o){switch(o.tag){case s.COLLIDER_TAG.BULLET:switch(this.mState){case i.NORMAL:this.SetState(i.CLICKED)}}},e.prototype.UpdateHighLight=function(t){this.mCountHighLight+=7*t,this.mSpriteHighLight.opacity=255*Math.sin(this.mCountHighLight)},a([u(cc.String)],e.prototype,"mButtonKey",void 0),a([u(cc.Node)],e.prototype,"mNodeNormal",void 0),a([u(cc.Node)],e.prototype,"mNodeClicked",void 0),a([u(cc.Node)],e.prototype,"mSpriteHighLight",void 0),a([u(cc.PhysicsCollider)],e.prototype,"mCollider",void 0),a([l],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../GameDefine":"GameDefine","../MessageMgr":"MessageMgr"}],PlatformSwitchSetup:[function(t,e,o){"use strict";cc._RF.push(e,"da4bb27YJNNDp2HDm8WbeQh","PlatformSwitchSetup");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.PlatformSwitchSetup=void 0;var i=t("./PlatformSwitch"),s=cc._decorator,c=s.ccclass,p=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mArrEnemy=[],e.mArrMovingPoint=[],e}return r(e,t),e.prototype.start=function(){var t=this.node.getComponentInChildren(i.PlatformSwitch);t&&(t.SetArrEnemy(this.mArrEnemy),t.SetArrMovePoint(this.mArrMovingPoint))},a([p({type:cc.Node})],e.prototype,"mArrEnemy",void 0),a([p({type:[cc.Node]})],e.prototype,"mArrMovingPoint",void 0),a([c],e)}(cc.Component);o.PlatformSwitchSetup=l,cc._RF.pop()},{"./PlatformSwitch":"PlatformSwitch"}],PlatformSwitch:[function(t,e,o){"use strict";cc._RF.push(e,"b55ff8fyFhP2qYsyqo/3ucR","PlatformSwitch");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.PlatformSwitch=void 0;var i,s=t("../GameDefine"),c=t("../MessageMgr"),p=t("./Enemy"),l=cc._decorator,u=l.ccclass,h=l.property;(function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.IDLE=2]="IDLE",t[t.MOVE=3]="MOVE",t[t.MOVE_END=4]="MOVE_END",t[t.END=5]="END"})(i||(i={}));var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mButtonKey="PlatformSwitch_01",e.MOVE_SPEED=150,e.mArrMovePoint=[],e}return r(e,t),e.prototype.onEnable=function(){c.MessageMgr.AddListener(this.OnMessage.bind(this),this.node.uuid)},e.prototype.onDisable=function(){c.MessageMgr.RemoveListener(this.node.uuid)},e.prototype.start=function(){this.SetState(i.INIT)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case i.INIT:this.mMoveIndex=-1;break;case i.IDLE:break;case i.MOVE:this.mMoveIndex++,this.mMoveIndex<this.mArrMovePoint.length?this.mMoveTarget=this.mArrMovePoint[this.mMoveIndex]:this.SetState(i.MOVE_END);break;case i.MOVE_END:case i.END:}},e.prototype.update=function(t){switch(this.mState){case i.INIT:this.SetState(i.IDLE);break;case i.IDLE:break;case i.MOVE:this.UpdateMove(t),this.node.x==this.mMoveTarget.x&&this.node.y==this.mMoveTarget.y&&this.SetState(i.MOVE);break;case i.MOVE_END:case i.END:}},e.prototype.OnMessage=function(t,e){switch(t){case s.GAME_MESSAGE.PLATFORM_SWITCH:switch(this.mState){case i.IDLE:e==this.mButtonKey&&this.SetState(i.MOVE)}}},e.prototype.SetArrMovePoint=function(t){this.mArrMovePoint=t},e.prototype.SetArrEnemy=function(t){for(var e=0;e<t.length;e++){var o=t[e];o.position=this.node.convertToNodeSpaceAR(o.parent.convertToWorldSpaceAR(o.position)),t[e].parent=this.node}},e.prototype.UpdateMove=function(t){var e=this.mMoveTarget.position.add(this.node.position.mul(-1)).normalize().mul(this.MOVE_SPEED);this.node.x=s.GameDefine.MoveToTarget(this.node.x,this.mMoveTarget.x,e.x,t),this.node.y=s.GameDefine.MoveToTarget(this.node.y,this.mMoveTarget.y,e.y,t);for(var o=this.node.getComponentsInChildren(p.Enemy),n=0;n<o.length;n++)o[n].SyncPositionRigidbodyInChild()},a([h(cc.String)],e.prototype,"mButtonKey",void 0),a([u],e)}(cc.Component);o.PlatformSwitch=f,cc._RF.pop()},{"../GameDefine":"GameDefine","../MessageMgr":"MessageMgr","./Enemy":"Enemy"}],PlayerAimRay:[function(t,e,o){"use strict";cc._RF.push(e,"ff444+LUlJNk7rlqzoooZTg","PlayerAimRay");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.PlayerAimRay=void 0;var i,s=t("../GameDefine"),c=t("../MessageMgr"),p=t("./BulletStats"),l=cc._decorator,u=l.ccclass,h=l.property;(function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.SHOW=2]="SHOW",t[t.HIDE=3]="HIDE"})(i||(i={}));var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.OFFSET_AIM_POINT=40,e.NUMBER_AIM_POINT=Math.ceil(1280*Math.sqrt(2)/e.OFFSET_AIM_POINT),e}return r(e,t),e.prototype.onEnable=function(){c.MessageMgr.AddListener(this.OnMessage.bind(this),this.node.uuid)},e.prototype.onDisable=function(){c.MessageMgr.RemoveListener(this.node.uuid)},e.prototype.start=function(){this.SetState(i.INIT)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case i.INIT:this.mAimPointContainer.active=!1,this.MakeAimPoints();break;case i.SHOW:this.mAimPointContainer.active=!0;break;case i.HIDE:this.mAimPointContainer.active=!1}},e.prototype.update=function(){switch(this.mState){case i.INIT:this.SetState(i.HIDE);break;case i.SHOW:case i.HIDE:}},e.prototype.OnMessage=function(t,e){switch(t){case s.GAME_MESSAGE.PLAYER_START_AIM:e.playerId==this.mPlayerId&&this.SetState(i.SHOW);break;case s.GAME_MESSAGE.PLAYER_END_AIM:e.playerId==this.mPlayerId&&this.SetState(i.HIDE);break;case s.GAME_MESSAGE.AIM_RAY_INFO:if(e.playerId==this.mPlayerId){var o=this.node.parent.convertToNodeSpaceAR(e.gunBarrelPosition);this.node.x=o.x,this.node.y=o.y;var n=this.node.parent.convertToNodeSpaceAR(e.gunPosition),r=this.node.parent.convertToNodeSpaceAR(e.aimPosition);this.mAngle=Math.atan2(r.y-n.y,r.x-n.x)/Math.PI*180,this.AlignAimPoints(this.mAngle,this.mBulletSpeed,this.mBulletGravity)}break;case s.GAME_MESSAGE.BULLET_INFO:if(e.playerId==this.mPlayerId){var a=cc.instantiate(e.prefabBullet);this.mBulletSpeed=a.getComponent(p.BulletStats).GetSpeed(),this.mBulletGravity=cc.director.getPhysicsManager().gravity.multiplyScalar(a.getComponent(cc.RigidBody).gravityScale),a.destroy()}}},e.prototype.SetPlayerId=function(t){this.mPlayerId=t},e.prototype.Shoot=function(t,e,o,n){if(t==this.mPlayerId){var r=cc.instantiate(o);r.parent=e;var a=e.convertToNodeSpaceAR(this.node.parent.convertToWorldSpaceAR(new cc.Vec2(this.node.x,this.node.y)));r.x=a.x,r.y=a.y,r.angle=this.mAngle+n,r.getComponent(p.BulletStats).SetPlayerId(this.mPlayerId)}},e.prototype.MakeAimPoints=function(){for(var t=0;t<this.NUMBER_AIM_POINT;t++){var e=cc.instantiate(this.mPrefabAimPoint);e.parent=this.mAimPointContainer,e.x=t*this.OFFSET_AIM_POINT,e.y=0}},e.prototype.AlignAimPoints=function(t,e,o){for(var n=e*Math.cos(t/180*Math.PI),r=e*Math.sin(t/180*Math.PI),a=0;a<this.NUMBER_AIM_POINT;a++){var i=a*(this.OFFSET_AIM_POINT/e),s=this.mAimPointContainer.children[a];s.x=n*i+o.x*i*i/2,s.y=r*i+o.y*i*i/2}},a([h(cc.Node)],e.prototype,"mAimPointContainer",void 0),a([h(cc.Prefab)],e.prototype,"mPrefabAimPoint",void 0),a([u],e)}(cc.Component);o.PlayerAimRay=f,cc._RF.pop()},{"../GameDefine":"GameDefine","../MessageMgr":"MessageMgr","./BulletStats":"BulletStats"}],PlayerAimTarget:[function(t,e,o){"use strict";cc._RF.push(e,"5e162US3INAJrRxi/it/J3G","PlayerAimTarget");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.PlayerAimTarget=void 0;var i,s=t("../GameDefine"),c=t("../MessageMgr"),p=cc._decorator,l=p.ccclass,u=p.property;(function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.SHOW=2]="SHOW",t[t.HIDE=3]="HIDE"})(i||(i={}));var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onEnable=function(){c.MessageMgr.AddListener(this.OnMessage.bind(this),this.node.uuid)},e.prototype.onDisable=function(){c.MessageMgr.RemoveListener(this.node.uuid)},e.prototype.start=function(){this.SetState(i.INIT)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case i.INIT:this.mSprite.active=!1;break;case i.SHOW:this.mSprite.active=!0;break;case i.HIDE:this.mSprite.active=!1}},e.prototype.update=function(){switch(this.mState){case i.INIT:this.SetState(i.HIDE);break;case i.SHOW:case i.HIDE:}},e.prototype.OnMessage=function(t,e){switch(t){case s.GAME_MESSAGE.AIM_RAY_INFO:if(e.playerId==this.mPlayerId){var o=this.node.parent.convertToNodeSpaceAR(e.aimPosition);this.node.x=o.x,this.node.y=o.y}break;case s.GAME_MESSAGE.PLAYER_START_AIM:e.playerId==this.mPlayerId&&this.SetState(i.SHOW);break;case s.GAME_MESSAGE.PLAYER_END_AIM:e.playerId==this.mPlayerId&&this.SetState(i.HIDE)}},e.prototype.SetPlayerId=function(t){this.mPlayerId=t},a([u(cc.Node)],e.prototype,"mSprite",void 0),a([l],e)}(cc.Component);o.PlayerAimTarget=h,cc._RF.pop()},{"../GameDefine":"GameDefine","../MessageMgr":"MessageMgr"}],PlayerCreator:[function(t,e,o){"use strict";cc._RF.push(e,"19b1dTBGoVLtLZ4SfTRXzYe","PlayerCreator");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.PlayerSetup=void 0;var i=t("./BotControl"),s=t("./UserControl"),c=cc._decorator,p=c.ccclass,l=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mIsUser=!0,e}return r(e,t),e.prototype.start=function(){var t=cc.instantiate(this.mPrefabPlayer);t.parent=this.node,t.getComponent(s.UserControl).enabled=this.mIsUser,t.getComponent(i.BotControl).enabled=!this.mIsUser},a([l(Boolean)],e.prototype,"mIsUser",void 0),a([p],e)}(cc.Component);o.PlayerSetup=u,cc._RF.pop()},{"./BotControl":"BotControl","./UserControl":"UserControl"}],PlayerHealthBar:[function(t,e,o){"use strict";cc._RF.push(e,"0d0b26vB51Muod1+YLaQQgG","PlayerHealthBar");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.PlayerHealthBar=void 0;var i=cc._decorator,s=i.ccclass,c=i.property,p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.start=function(){},e.prototype.SetPercent=function(t,e){this.mSpriteFill.fillRange=t,this.mTextHealth.string=e},e.prototype.SetTextAmountOfBullet=function(t){this.mTextAmountOfBullet.string=t},a([c(cc.Sprite)],e.prototype,"mSpriteFill",void 0),a([c(cc.Label)],e.prototype,"mTextHealth",void 0),a([c(cc.Label)],e.prototype,"mTextAmountOfBullet",void 0),a([s],e)}(cc.Component);o.PlayerHealthBar=p,cc._RF.pop()},{}],PlayerSetup:[function(t,e,o){"use strict";cc._RF.push(e,"aea517Nn/ROvLfUo10qZ5sr","PlayerSetup");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.PlayerSetup=void 0;var i,s=t("../States/StateDuelMode"),c=t("../States/StateDuelModeBet"),p=t("../States/StateIngame"),l=t("../UserProfile"),u=t("./BotControl"),h=t("./Player"),f=t("./PlayerSpine"),S=t("./PlayerStats"),_=t("./UserControl"),d=cc._decorator,m=d.ccclass,y=d.property;(function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.LOAD_PLAYER=2]="LOAD_PLAYER",t[t.SETUP_PLAYER=3]="SETUP_PLAYER",t[t.NORMAL=4]="NORMAL"})(i||(i={}));var E=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mIsUser=!0,e.mHealthMax=0,e.mBulletMax=0,e.mDirectionX=1,e.mPointList01=[],e.mPointList02=[],e.mPointList03=[],e.mPointList04=[],e}return r(e,t),e.prototype.start=function(){this.SetState(i.INIT)},e.prototype.SetState=function(t){var e=this;switch(this.mState=t,this.mState){case i.INIT:break;case i.LOAD_PLAYER:p.StateIngame.Instance.AddCountLoadingMax(1),s.StateDuelMode.Instance.AddCountLoadingMax(1);var o=l.UserProfile.Instance.GetCurrentCharacterLoadingInfo(this.mIsUser?l.UserProfile.Instance.GetCurrentCharacterId():c.StateDuelModeBet.Instance.GetBotProfile().assetId);cc.resources.load(o.prefabUrl,function(t,o){e.mPrefabPlayer=o,e.SetState(i.SETUP_PLAYER)});break;case i.SETUP_PLAYER:var n=cc.instantiate(this.mPrefabPlayer);n.parent=this.node;var r=n.getComponent(_.UserControl);r&&(r.enabled=this.mIsUser);var a=n.getComponent(u.BotControl);a&&(a.enabled=!this.mIsUser);var d=n.getComponent(S.PlayerStats);d&&(this.mHealthMax>0&&d.SetHealthMax(this.mHealthMax),this.mBulletMax>0&&d.SetAmountOfBulletMax(this.mBulletMax));var m=n.getComponentInChildren(f.PlayerSpine);m&&m.SetDirectionX(this.mDirectionX);var y=n.getComponent(h.Player);y&&(this.mPointList01.length>0&&y.AddMovePointList(this.mPointList01),this.mPointList02.length>0&&y.AddMovePointList(this.mPointList02),this.mPointList03.length>0&&y.AddMovePointList(this.mPointList03),this.mPointList04.length>0&&y.AddMovePointList(this.mPointList04));break;case i.NORMAL:p.StateIngame.Instance.AddCountLoading(1),s.StateDuelMode.Instance.AddCountLoading(1)}},e.prototype.update=function(){switch(this.mState){case i.INIT:this.SetState(i.LOAD_PLAYER);break;case i.LOAD_PLAYER:break;case i.SETUP_PLAYER:this.SetState(i.NORMAL);break;case i.NORMAL:}},e.prototype.SetBulletMax=function(t){this.mBulletMax=t},a([y(cc.Boolean)],e.prototype,"mIsUser",void 0),a([y(cc.Integer)],e.prototype,"mHealthMax",void 0),a([y(cc.Integer)],e.prototype,"mBulletMax",void 0),a([y(cc.Integer)],e.prototype,"mDirectionX",void 0),a([y({type:[cc.Node]})],e.prototype,"mPointList01",void 0),a([y({type:[cc.Node]})],e.prototype,"mPointList02",void 0),a([y({type:[cc.Node]})],e.prototype,"mPointList03",void 0),a([y({type:[cc.Node]})],e.prototype,"mPointList04",void 0),a([m],e)}(cc.Component);o.PlayerSetup=E,cc._RF.pop()},{"../States/StateDuelMode":"StateDuelMode","../States/StateDuelModeBet":"StateDuelModeBet","../States/StateIngame":"StateIngame","../UserProfile":"UserProfile","./BotControl":"BotControl","./Player":"Player","./PlayerSpine":"PlayerSpine","./PlayerStats":"PlayerStats","./UserControl":"UserControl"}],PlayerSpine:[function(t,e,o){"use strict";cc._RF.push(e,"6ef82Te0h1Or5V40EqlIzYB","PlayerSpine");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.PlayerSpine=void 0;var i=t("../GameDefine"),s=t("../MessageMgr"),c=cc._decorator,p=c.ccclass,l=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mDirectionX=1,e}return r(e,t),e.prototype.onEnable=function(){s.MessageMgr.AddListener(this.OnMessage.bind(this),this.node.uuid)},e.prototype.onDisable=function(){s.MessageMgr.RemoveListener(this.node.uuid)},e.prototype.start=function(){this.mBoneAim=this.mSpine.findBone("Aim"),this.mBoneGunBarrel=this.mSpine.findBone("Bullet_Position")},e.prototype.OnMessage=function(t,e){switch(t){case i.GAME_MESSAGE.PLAYER_ANIMATION_IDLE:e.playerId==this.mPlayerId&&this.mSpine.setAnimation(0,"Idle",!0);break;case i.GAME_MESSAGE.PLAYER_ANIMATION_AIM:e.playerId==this.mPlayerId&&this.mSpine.setAnimation(0,"Aim",!0);break;case i.GAME_MESSAGE.PLAYER_ANIMATION_WALK:e.playerId==this.mPlayerId&&this.mSpine.setAnimation(0,"Walk",!0);break;case i.GAME_MESSAGE.AIM_POSITION:e.playerId==this.mPlayerId&&this.AimPosition(e.aimPos)}},e.prototype.SetPlayerId=function(t){this.mPlayerId=t},e.prototype.SetDirectionX=function(t){this.mDirectionX=t>=0?1:-1,this.mSpine.node.scaleX=Math.abs(this.mSpine.node.scaleX)*this.mDirectionX},e.prototype.GetDirectionX=function(){return this.mDirectionX},e.prototype.AimPosition=function(t){this.mSpine.node.scaleX=Math.abs(this.mSpine.node.scaleX);var e=this.mSpine.node.convertToNodeSpaceAR(t);this.mSpine.node.scaleX=(e.x>=0?1:-1)*Math.abs(this.mSpine.node.scaleX),this.SetDirectionX(this.mSpine.node.scaleX),this.mBoneAim.x=Math.abs(e.x),this.mBoneAim.y=e.y,this.mBoneAim.updateWorldTransform();var o=new cc.Vec2(this.mBoneAim.worldX-this.mBoneGunBarrel.worldX,this.mBoneAim.worldY-this.mBoneGunBarrel.worldY);if(o.len()>400){var n=o.normalize(),r=this.mBoneAim.parent.worldToLocal(new sp.spine.Vector2(this.mBoneGunBarrel.worldX+400*n.x,this.mBoneGunBarrel.worldY+400*n.y));this.mBoneAim.x=r.x,this.mBoneAim.y=r.y}s.MessageMgr.SendMessage(i.GAME_MESSAGE.AIM_RAY_INFO,{playerId:this.mPlayerId,gunBarrelPosition:this.mSpine.node.convertToWorldSpaceAR(new cc.Vec2(this.mBoneGunBarrel.worldX,this.mBoneGunBarrel.worldY)),gunPosition:this.mSpine.node.convertToWorldSpaceAR(new cc.Vec2(this.mBoneGunBarrel.parent.worldX,this.mBoneGunBarrel.parent.worldY)),aimPosition:t})},a([l(sp.Skeleton)],e.prototype,"mSpine",void 0),a([p],e)}(cc.Component);o.PlayerSpine=u,cc._RF.pop()},{"../GameDefine":"GameDefine","../MessageMgr":"MessageMgr"}],PlayerStats:[function(t,e,o){"use strict";cc._RF.push(e,"09e79m1jupF7Ke5+5cj4eHI","PlayerStats");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.PlayerStats=void 0;var i,s=t("../GameDefine"),c=t("../MessageMgr"),p=t("./PlayerHealthBar"),l=t("./UIBulletMgr"),u=cc._decorator,h=u.ccclass,f=u.property;(function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.ACTIVE=2]="ACTIVE"})(i||(i={}));var S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.HEALTH_MAX=5,e.AMOUNT_OF_BULLET_MAX=5,e.ARR_SHOOT_DELAY_TIME=[0],e.ARR_SHOOT_ANGLE_OFFSET=[0],e.MOVE_SPEED=300,e}return r(e,t),e.prototype.start=function(){this.SetState(i.INIT)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case i.INIT:this.mPlayerHealthBar=this.node.getComponentInChildren(p.PlayerHealthBar),this.SetHealth(this.HEALTH_MAX),this.SetAmountOfBullet(this.AMOUNT_OF_BULLET_MAX),c.MessageMgr.SendMessage(s.GAME_MESSAGE.BULLET_UI_AMOUT_OF_BULLET_MAX,this.AMOUNT_OF_BULLET_MAX);break;case i.ACTIVE:}},e.prototype.update=function(){switch(this.mState){case i.INIT:this.SetState(i.ACTIVE);break;case i.ACTIVE:}},e.prototype.SetHealthMax=function(t){this.HEALTH_MAX=t},e.prototype.SetAmountOfBulletMax=function(t){this.AMOUNT_OF_BULLET_MAX=t},e.prototype.AddHealth=function(t){this.SetHealth(this.mHealth+t)},e.prototype.IsDeath=function(){return this.mHealth<=0},e.prototype.AddAmountOfBullet=function(t){this.SetAmountOfBullet(this.mAmountOfBullet+t)},e.prototype.IsOutOfBullet=function(){return this.mAmountOfBullet<=0},e.prototype.GetMoveSpeed=function(){return this.MOVE_SPEED},e.prototype.GetArrShootDelayTime=function(){return this.ARR_SHOOT_DELAY_TIME},e.prototype.GetArrShootAngleOffset=function(){return this.ARR_SHOOT_ANGLE_OFFSET},e.prototype.SetHealth=function(t){this.mHealth=Math.max(t,0),this.mPlayerHealthBar.SetPercent(s.GameDefine.Clamp(this.mHealth/this.HEALTH_MAX,0,1),this.mHealth+"/"+this.HEALTH_MAX)},e.prototype.SetAmountOfBullet=function(t){this.mAmountOfBullet=Math.max(t,0),this.mPlayerHealthBar.SetTextAmountOfBullet(this.mAmountOfBullet+"/"+this.AMOUNT_OF_BULLET_MAX),l.UIBulletMgr.Instance&&l.UIBulletMgr.Instance.SetNumberBulletCurrent(this.mAmountOfBullet)},a([f(cc.Integer)],e.prototype,"HEALTH_MAX",void 0),a([f(cc.Integer)],e.prototype,"AMOUNT_OF_BULLET_MAX",void 0),a([f({type:[cc.Float]})],e.prototype,"ARR_SHOOT_DELAY_TIME",void 0),a([f({type:[cc.Float]})],e.prototype,"ARR_SHOOT_ANGLE_OFFSET",void 0),a([h],e)}(cc.Component);o.PlayerStats=S,cc._RF.pop()},{"../GameDefine":"GameDefine","../MessageMgr":"MessageMgr","./PlayerHealthBar":"PlayerHealthBar","./UIBulletMgr":"UIBulletMgr"}],Player:[function(t,e,o){"use strict";cc._RF.push(e,"582b4q/5NRNRLVIbxM0THID","Player");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.Player=void 0;var i,s=t("../GameDefine"),c=t("../MessageMgr"),p=t("./PlayerAimRay"),l=t("./PlayerAimTarget"),u=t("./PlayerSpine"),h=t("./PlayerStats"),f=t("./ReadyAimIndicator"),S=t("./UserControl"),_=cc._decorator,d=_.ccclass,m=_.property;(function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.IDLE=2]="IDLE",t[t.READY_AIM=3]="READY_AIM",t[t.AIM=4]="AIM",t[t.SHOOT=5]="SHOOT",t[t.MOVE_START=6]="MOVE_START",t[t.MOVE=7]="MOVE",t[t.MOVE_END=8]="MOVE_END",t[t.WIN=9]="WIN",t[t.DEATH=10]="DEATH"})(i||(i={}));var y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mAimPosition=new cc.Vec2(0,0),e.mArrMovePointList=[],e}return r(e,t),e.prototype.onEnable=function(){c.MessageMgr.AddListener(this.OnMessage.bind(this),this.node.uuid)},e.prototype.onDisable=function(){c.MessageMgr.RemoveListener(this.node.uuid)},e.prototype.start=function(){this.SetState(i.INIT)},e.prototype.SetState=function(t){var e=this;switch(this.mState){case i.READY_AIM:this.mReadyAimIndicator.node.active=!1;break;case i.AIM:c.MessageMgr.SendMessage(s.GAME_MESSAGE.PLAYER_END_AIM,{playerId:this.node.uuid})}switch(this.mState=t,this.mState){case i.INIT:this.mMoveListIndex=-1,this.mPlayerSpine=this.node.getComponentInChildren(u.PlayerSpine),this.mReadyAimIndicator=this.node.getComponentInChildren(f.ReadyAimIndicator),this.mReadyAimIndicator.node.active=!1;var o=cc.instantiate(this.mPrefabAimRay);o.parent=this.node,this.mPlayerAimRay=o.getComponent(p.PlayerAimRay),this.mPlayerAimRay.SetPlayerId(this.node.uuid);for(var n=this.node.getComponentsInChildren(u.PlayerSpine),r=0;r<n.length;r++)n[r].SetPlayerId(this.node.uuid);var a=this.node.getComponentsInChildren(l.PlayerAimTarget);for(r=0;r<a.length;r++)a[r].SetPlayerId(this.node.uuid);c.MessageMgr.SendMessage(s.GAME_MESSAGE.BULLET_INFO,{playerId:this.node.uuid,prefabBullet:this.mPrefabBullet}),c.MessageMgr.SendMessage(s.GAME_MESSAGE.ADD_TO_PLAYER_LIST,this.node.uuid),c.MessageMgr.SendMessage(s.GAME_MESSAGE.ADD_TO_SHOOT_LIST,this.node.uuid);break;case i.IDLE:c.MessageMgr.SendMessage(s.GAME_MESSAGE.PLAYER_ANIMATION_IDLE,{playerId:this.node.uuid}),c.MessageMgr.SendMessage(s.GAME_MESSAGE.END_PLAYER_TURN,this.node.uuid),this.mPlayerStats.IsOutOfBullet()&&c.MessageMgr.SendMessage(s.GAME_MESSAGE.REMOVE_FROM_SHOOT_LIST,this.node.uuid);break;case i.READY_AIM:this.mReadyAimIndicator.node.active=!0;break;case i.AIM:c.MessageMgr.SendMessage(s.GAME_MESSAGE.PLAYER_ANIMATION_AIM,{playerId:this.node.uuid}),c.MessageMgr.SendMessage(s.GAME_MESSAGE.PLAYER_START_AIM,{playerId:this.node.uuid});break;case i.SHOOT:this.mPercent=0,this.mCountBulletFlying=0,this.mPlayerStats.AddAmountOfBullet(-1),c.MessageMgr.SendMessage(s.GAME_MESSAGE.PLAYER_ANIMATION_IDLE,{playerId:this.node.uuid});for(var h=this.mPlayerStats.GetArrShootDelayTime(),S=this.mPlayerStats.GetArrShootAngleOffset(),_=Math.min(h.length,S.length),d=function(t){setTimeout(function(){switch(e.mState){case i.SHOOT:e.mPlayerAimRay.Shoot(e.node.uuid,e.node.parent,e.mPrefabBullet,S[t])}},1e3*h[t])},m=0;m<_;m++)d(m);break;case i.MOVE_START:this.mArrMovePointList.length>0?(this.mMoveListIndex++,this.mMovePointIndex=-1,this.mMovePointList=this.mArrMovePointList[this.mMoveListIndex%this.mArrMovePointList.length],c.MessageMgr.SendMessage(s.GAME_MESSAGE.PLAYER_ANIMATION_WALK,{playerId:this.node.uuid}),this.SetState(i.MOVE)):this.SetState(i.MOVE_END);break;case i.MOVE:this.mMovePointIndex++,this.mMovePointIndex<this.mMovePointList.length?(this.mMoveTarget=this.mMovePointList[this.mMovePointIndex],this.mPlayerSpine.SetDirectionX(this.mMoveTarget.x-this.node.x)):this.SetState(i.MOVE_END);break;case i.MOVE_END:this.SetState(i.IDLE);break;case i.WIN:break;case i.DEATH:c.MessageMgr.SendMessage(s.GAME_MESSAGE.REMOVE_FROM_PLAYER_LIST,this.node.uuid),c.MessageMgr.SendMessage(s.GAME_MESSAGE.REMOVE_FROM_SHOOT_LIST,this.node.uuid),this.node.destroy()}},e.prototype.update=function(t){switch(this.mState){case i.INIT:this.SetState(i.IDLE);break;case i.IDLE:this.UpdateColliderDirection(),this.mPlayerStats.IsDeath()&&this.SetState(i.DEATH);break;case i.READY_AIM:this.UpdateColliderDirection();break;case i.AIM:this.UpdateAim(),this.UpdateColliderDirection();break;case i.SHOOT:this.mPercent=this.mCountBulletFlying<=0?s.GameDefine.MoveToTarget(this.mPercent,1,1/.3,t):0,this.UpdateColliderDirection(),this.mCountBulletFlying<=0&&this.mPercent>=1&&this.SetState(i.MOVE_START);break;case i.MOVE_START:this.UpdateColliderDirection();break;case i.MOVE:this.UpdateMove(t),this.SyncPositionRigidbodyInChild(),this.UpdateColliderDirection(),this.node.x==this.mMoveTarget.x&&this.node.y==this.mMoveTarget.y&&this.SetState(i.MOVE);break;case i.MOVE_END:this.UpdateColliderDirection();break;case i.WIN:case i.DEATH:}},e.prototype.OnMessage=function(t,e){switch(t){case s.GAME_MESSAGE.ADD_BULLET_FLYING:switch(this.mState){case i.SHOOT:this.mCountBulletFlying+=e}break;case s.GAME_MESSAGE.PLAYER_WIN:switch(this.mState){case i.IDLE:case i.READY_AIM:case i.AIM:case i.SHOOT:case i.MOVE_START:case i.MOVE:case i.MOVE_END:this.SetState(i.WIN)}break;case s.GAME_MESSAGE.START_PLAYER_TURN:switch(this.mState){case i.IDLE:e==this.node.uuid&&this.SetState(i.READY_AIM)}break;case s.GAME_MESSAGE.DUEL_MODE_DETECT_RESULT:switch(this.mState){case i.IDLE:case i.READY_AIM:case i.AIM:case i.SHOOT:case i.MOVE_START:case i.MOVE:case i.MOVE_END:e==this.node.uuid&&(this.node.getComponent(S.UserControl).enabled?c.MessageMgr.SendMessage(s.GAME_MESSAGE.DUEL_MODE_WIN):c.MessageMgr.SendMessage(s.GAME_MESSAGE.DUEL_MODE_LOSE))}}},e.prototype.IsStateReadyAim=function(){return this.mState==i.READY_AIM},e.prototype.SetStateAim=function(){switch(this.mState){case i.READY_AIM:this.SetState(i.AIM)}},e.prototype.SetStateShoot=function(){switch(this.mState){case i.AIM:this.SetState(i.SHOOT)}},e.prototype.SetAimPosition=function(t){switch(this.mState){case i.READY_AIM:case i.AIM:this.mAimPosition=new cc.Vec2(t.x,t.y)}},e.prototype.GetShot=function(t,e){switch(this.mState){case i.IDLE:t!=this.node.uuid&&this.mPlayerStats.AddHealth(e)}},e.prototype.AddMovePointList=function(t){this.mArrMovePointList.push(t)},e.prototype.UpdateAim=function(){c.MessageMgr.SendMessage(s.GAME_MESSAGE.AIM_POSITION,{playerId:this.node.uuid,aimPos:this.mAimPosition})},e.prototype.UpdateColliderDirection=function(){this.mContainerCollider_L.active=this.mPlayerSpine.GetDirectionX()<0,this.mContainerCollider_R.active=this.mPlayerSpine.GetDirectionX()>=0},e.prototype.UpdateMove=function(t){var e=this.mMoveTarget.position.add(this.node.position.mul(-1)).normalize().mul(this.mPlayerStats.GetMoveSpeed());this.node.x=s.GameDefine.MoveToTarget(this.node.x,this.mMoveTarget.x,e.x,t),this.node.y=s.GameDefine.MoveToTarget(this.node.y,this.mMoveTarget.y,e.y,t)},e.prototype.SyncPositionRigidbodyInChild=function(){for(var t=this.node.getComponentsInChildren(cc.RigidBody),e=0;e<t.length;e++)t[e].syncPosition(!1)},a([m(h.PlayerStats)],e.prototype,"mPlayerStats",void 0),a([m(cc.Node)],e.prototype,"mContainerCollider_L",void 0),a([m(cc.Node)],e.prototype,"mContainerCollider_R",void 0),a([m(cc.Prefab)],e.prototype,"mPrefabAimRay",void 0),a([m(cc.Prefab)],e.prototype,"mPrefabBullet",void 0),a([d],e)}(cc.Component);o.Player=y,cc._RF.pop()},{"../GameDefine":"GameDefine","../MessageMgr":"MessageMgr","./PlayerAimRay":"PlayerAimRay","./PlayerAimTarget":"PlayerAimTarget","./PlayerSpine":"PlayerSpine","./PlayerStats":"PlayerStats","./ReadyAimIndicator":"ReadyAimIndicator","./UserControl":"UserControl"}],PopupAssetError:[function(t,e,o){"use strict";cc._RF.push(e,"421e70RompMB6OdpDBi9JeC","PopupAssetError");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.PopupAssetError=void 0;var i=t("../States/StateProfile"),s=t("../UserProfile"),c=cc._decorator,p=c.ccclass,l=c.property,u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onLoad=function(){this.node.on("click",this.OnClick,this)},e.prototype.start=function(){},e.prototype.SetupInfo=function(t){this.mTitle.string=t},e.prototype.OnClick=function(){console.log("OnClick - PopupNotEnoughPoint"),this.node.active=!1,s.UserProfile.Instance.Reset(),i.StateProfile.Instance.Reset()},a([l(cc.Label)],e.prototype,"mTitle",void 0),a([p],e)}(cc.Component);o.PopupAssetError=u,cc._RF.pop()},{"../States/StateProfile":"StateProfile","../UserProfile":"UserProfile"}],PopupMgr:[function(t,e,o){"use strict";cc._RF.push(e,"5deccas7CFCK4jZwc6ci7eo","PopupMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./GameDefine"),s=t("./MessageMgr"),c=t("./Popups/PopupAssetError"),p=t("./Popups/PopupNotEnoughPoint"),l=t("./Popups/PopupRentCharacter"),u=cc._decorator,h=u.ccclass,f=u.property,S=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onLoad=function(){s.MessageMgr.AddListener(this.OnMessage.bind(this),this.node.uuid)},e.prototype.start=function(){},e.prototype.OnMessage=function(t,e){switch(t){case i.GAME_MESSAGE.POPUP_RENT_CHARACTER:this.mPopupRentCharacter.node.active=!0,this.mPopupRentCharacter.SetupInfo(e.assetInfo,e.spriteFrame);break;case i.GAME_MESSAGE.POPUP_NOT_ENOUGH_POINT:this.mPopupNotEnoughPoint.node.active=!0,this.mPopupNotEnoughPoint.SetInfo(e.message);break;case i.GAME_MESSAGE.POPUP_ASSET_ERROR:console.log("PopupMgr OnMessage GAME_MESSAGE.POPUP_ASSET_ERROR"),console.log(e.message),this.mPopupAssetError.node.active=!0,this.mPopupAssetError.SetupInfo(e.message)}},a([f(l.PopupRentCharacter)],e.prototype,"mPopupRentCharacter",void 0),a([f(p.PopupNotEnoughPoint)],e.prototype,"mPopupNotEnoughPoint",void 0),a([f(c.PopupAssetError)],e.prototype,"mPopupAssetError",void 0),a([h],e)}(cc.Component);o.default=S,cc._RF.pop()},{"./GameDefine":"GameDefine","./MessageMgr":"MessageMgr","./Popups/PopupAssetError":"PopupAssetError","./Popups/PopupNotEnoughPoint":"PopupNotEnoughPoint","./Popups/PopupRentCharacter":"PopupRentCharacter"}],PopupNotEnoughPoint:[function(t,e,o){"use strict";cc._RF.push(e,"4e0063/Qm9EM65Rt8StYbc7","PopupNotEnoughPoint");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.PopupNotEnoughPoint=void 0;var i=cc._decorator,s=i.ccclass,c=i.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mTille=null,e}return r(e,t),e.prototype.onLoad=function(){this.node.on("click",this.OnClick,this)},e.prototype.start=function(){},e.prototype.SetInfo=function(t){this.mTille.string=t},e.prototype.OnClick=function(){console.log("OnClick - PopupNotEnoughPoint"),this.node.active=!1},a([c(cc.Label)],e.prototype,"mTille",void 0),a([s],e)}(cc.Component);o.PopupNotEnoughPoint=p,cc._RF.pop()},{}],PopupRentCharacter:[function(t,e,o){"use strict";cc._RF.push(e,"24527388xNHMYCCKoarFZ/w","PopupRentCharacter");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.PopupRentCharacter=void 0;var i=t("../API"),s=t("../GameDefine"),c=t("../MessageMgr"),p=t("../States/StateRentCharacter"),l=t("../UserProfile"),u=cc._decorator,h=u.ccclass,f=u.property,S=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onLoad=function(){this.mButtonYes.on("click",this.OnClickButtonYes,this),this.mButtonNo.on("click",this.OnClickButtonNo,this)},e.prototype.start=function(){},e.prototype.update=function(){},e.prototype.SetupInfo=function(t,e){this.mAssetInfo=t,this.mSprite.spriteFrame=e},e.prototype.OnClickButtonYes=function(){var t=this;this.node.active=!1,i.API.Instance.RentAsset({assetId:this.mAssetInfo.assetId}).then(function(e){console.log("RentAsset"),console.log(e.responseText),console.log(JSON.parse(e.responseText));var o=JSON.parse(e.responseText);if(o.errorCode)switch(o.errorCode){case"POINT_NOT_ENOUGH":default:console.log(o.message),c.MessageMgr.SendMessage(s.GAME_MESSAGE.POPUP_NOT_ENOUGH_POINT,{message:o.message})}else t.mAssetInfo.rentStatus=!0,l.UserProfile.Instance.SetCurrentCharacterId(o.data.assetId),p.StateRentCharacter.Instance.ShowButtonMainMenu(),c.MessageMgr.SendMessage(s.GAME_MESSAGE.HIDE_CHARACTER_RENT_CARD,{assetInfo:t.mAssetInfo})}).catch()},e.prototype.OnClickButtonNo=function(){this.node.active=!1},a([f(cc.Sprite)],e.prototype,"mSprite",void 0),a([f(cc.Node)],e.prototype,"mButtonYes",void 0),a([f(cc.Node)],e.prototype,"mButtonNo",void 0),a([h],e)}(cc.Component);o.PopupRentCharacter=S,cc._RF.pop()},{"../API":"API","../GameDefine":"GameDefine","../MessageMgr":"MessageMgr","../States/StateRentCharacter":"StateRentCharacter","../UserProfile":"UserProfile"}],RagDoll:[function(t,e,o){"use strict";cc._RF.push(e,"80839yAWKZOA6ChwM2S9xmW","RagDoll");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.RagDoll=void 0;var i,s=cc._decorator,c=s.ccclass;s.property,function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.ACTIVE=2]="ACTIVE"}(i||(i={}));var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.FORCE=700,e}return r(e,t),e.prototype.start=function(){this.SetState(i.INIT)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case i.INIT:break;case i.ACTIVE:this.node.getComponent(cc.RigidBody).applyLinearImpulse(this.mForce,this.mForcePos,!0)}},e.prototype.update=function(){switch(this.mState){case i.INIT:this.SetState(i.ACTIVE);break;case i.ACTIVE:}},e.prototype.SetForce=function(t,e){if(t.mag()>=this.FORCE)this.mForce=t.clone().normalizeSelf().multiplyScalar(this.FORCE),this.mForcePos=e;else if(t.mag()>=.2*this.FORCE)this.mForce=t.clone().normalizeSelf().multiplyScalar(.7*this.FORCE),this.mForcePos=e;else{var o=new cc.Vec2(0,0);this.node.getComponent(cc.RigidBody).getWorldPosition(o),this.mForce=e.clone().addSelf(o.multiplyScalar(-1)).normalizeSelf().multiplyScalar(.5*this.FORCE),this.mForcePos=e}},a([c],e)}(cc.Component);o.RagDoll=p,cc._RF.pop()},{}],ReadyAimIndicator:[function(t,e,o){"use strict";cc._RF.push(e,"c0650v3v+VKB74BSFEGrF8a","ReadyAimIndicator");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.ReadyAimIndicator=void 0;var i=t("./UserControl"),s=cc._decorator,c=s.ccclass,p=s.property,l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.start=function(){var t=this.node.parent.getComponent(i.UserControl);this.node.getComponentInChildren(cc.Sprite).node.color=t.enabled?this.mUserColor:this.mBotColor},a([p(cc.Color)],e.prototype,"mUserColor",void 0),a([p(cc.Color)],e.prototype,"mBotColor",void 0),a([c],e)}(cc.Component);o.ReadyAimIndicator=l,cc._RF.pop()},{"./UserControl":"UserControl"}],SpineDetroy:[function(t,e,o){"use strict";cc._RF.push(e,"598b3FwcMFKM47DyobKATco","SpineDetroy");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.SpineDetroy=void 0;var i=cc._decorator,s=i.ccclass,c=i.property,p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onLoad=function(){var t=this;this.mSpine&&this.mSpine.setCompleteListener(function(){console.log("SpineDetroy - setCompleteListener"),t.mDetroyNode&&t.mDetroyNode.destroy()})},e.prototype.start=function(){},a([c(sp.Skeleton)],e.prototype,"mSpine",void 0),a([c(cc.Node)],e.prototype,"mDetroyNode",void 0),a([s],e)}(cc.Component);o.SpineDetroy=p,cc._RF.pop()},{}],StateCharacterList:[function(t,e,o){"use strict";cc._RF.push(e,"5cf3dptFvlHL6aX28Snjp5w","StateCharacterList");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.StateCharacterList=void 0;var i,s=t("../CharacterList/CharacterCard"),c=t("../UserProfile"),p=t("./StateMainMenu"),l=cc._decorator,u=l.ccclass,h=l.property;(function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.CREATE_CHARACTER_CARD=2]="CREATE_CHARACTER_CARD",t[t.SETUP_CHARACTER_CARD_INFO=3]="SETUP_CHARACTER_CARD_INFO",t[t.ACTIVE=4]="ACTIVE",t[t.BACK_TO_MAIN_MENU=5]="BACK_TO_MAIN_MENU",t[t.END=6]="END"})(i||(i={}));var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mIsCreateCharacterCards=!0,e}var o;return r(e,t),o=e,Object.defineProperty(e,"Instance",{get:function(){return o.mInstance},enumerable:!1,configurable:!0}),e.prototype.onEnable=function(){this.mButtonMainMenu.on("click",this.OnClickButtonMainMenu,this)},e.prototype.onDisable=function(){this.mButtonMainMenu.off("click",this.OnClickButtonMainMenu,this)},e.prototype.onLoad=function(){o.mInstance=this},e.prototype.start=function(){this.SetState(i.END)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case i.INIT:this.mUI.active=!0;break;case i.CREATE_CHARACTER_CARD:this.CreateCharacterCard(),this.mIsCreateCharacterCards=!1;break;case i.SETUP_CHARACTER_CARD_INFO:this.SetupCharacterCardsInfo();break;case i.ACTIVE:break;case i.BACK_TO_MAIN_MENU:p.StateMainMenu.Instance.SetStateInit();break;case i.END:this.mUI.active=!1}},e.prototype.update=function(){switch(this.mState){case i.INIT:this.SetState(this.mIsCreateCharacterCards?i.CREATE_CHARACTER_CARD:i.SETUP_CHARACTER_CARD_INFO);break;case i.CREATE_CHARACTER_CARD:this.SetState(i.SETUP_CHARACTER_CARD_INFO);break;case i.SETUP_CHARACTER_CARD_INFO:this.SetState(i.ACTIVE);break;case i.ACTIVE:break;case i.BACK_TO_MAIN_MENU:this.SetState(i.END);break;case i.END:}},e.prototype.OnClickButtonMainMenu=function(){switch(this.mState){case i.ACTIVE:this.SetState(i.BACK_TO_MAIN_MENU)}},e.prototype.SetStateInit=function(){switch(this.mState){case i.END:this.SetState(i.INIT)}},e.prototype.SetStateSetupCharacterCardInfo=function(){switch(this.mState){case i.ACTIVE:this.SetState(i.SETUP_CHARACTER_CARD_INFO)}},e.prototype.CreateCharacterCard=function(){for(var t=c.UserProfile.Instance.GetUserAsset(),e=0;e<t.data.length;e++){var o=t.data[e],n=cc.instantiate(this.mPrefabCharacterCard);n.parent=this.mCharacterCardContainer;var r=n.getComponent(s.CharacterCard);r&&r.SetupAvatarInfo(c.UserProfile.Instance.CHARACTER_ROOT_PATH+o.path)}cc.instantiate(this.mPrefabComingSoonCard).parent=this.mCharacterCardContainer},e.prototype.SetupCharacterCardsInfo=function(){for(var t=c.UserProfile.Instance.GetUserAsset(),e=0;e<t.data.length;e++){var o=t.data[e],n=this.mCharacterCardContainer.children[e].getComponent(s.CharacterCard);n&&n.SetupUnlockInfo(o)}},a([h(cc.Node)],e.prototype,"mUI",void 0),a([h(cc.Node)],e.prototype,"mCharacterCardContainer",void 0),a([h(cc.Prefab)],e.prototype,"mPrefabCharacterCard",void 0),a([h(cc.Prefab)],e.prototype,"mPrefabComingSoonCard",void 0),a([h(cc.Node)],e.prototype,"mButtonMainMenu",void 0),o=a([u],e)}(cc.Component);o.StateCharacterList=f,cc._RF.pop()},{"../CharacterList/CharacterCard":"CharacterCard","../UserProfile":"UserProfile","./StateMainMenu":"StateMainMenu"}],StateDuelModeBet:[function(t,e,o){"use strict";cc._RF.push(e,"cd5c4KQys1D0ZOVMr1U37jq","StateDuelModeBet");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.StateDuelModeBet=void 0;var i,s=t("../GameDefine"),c=t("../MessageMgr"),p=t("../UserProfile"),l=t("./StateDuelModeDraw"),u=t("./StateDuelModeLose"),h=t("./StateDuelModeWin"),f=t("./StateMainMenu"),S=cc._decorator,_=S.ccclass,d=S.property;(function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.ACTIVE=2]="ACTIVE",t[t.GO_TO_MAIN_MENU=3]="GO_TO_MAIN_MENU",t[t.PLAY=4]="PLAY",t[t.END=5]="END"})(i||(i={}));var m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return r(e,t),o=e,Object.defineProperty(e,"Instance",{get:function(){return o.mInstance},enumerable:!1,configurable:!0}),e.prototype.onEnable=function(){c.MessageMgr.AddListener(this.OnMessage.bind(this),this.node.uuid),this.mButtonMainMenu.on("click",this.OnClickButtonMainMenu,this),this.mButtonPlay.on("click",this.OnClickButtonPlay,this)},e.prototype.onDisable=function(){c.MessageMgr.RemoveListener(this.node.uuid),this.mButtonMainMenu.off("click",this.OnClickButtonMainMenu,this),this.mButtonPlay.off("click",this.OnClickButtonPlay,this)},e.prototype.onLoad=function(){o.mInstance=this},e.prototype.start=function(){this.SetState(i.END)},e.prototype.SetState=function(t){var e=this;switch(this.mState=t,this.mState){case i.INIT:this.mUI.active=!0;break;case i.ACTIVE:var o=p.UserProfile.Instance.GetCurrentProfileCharacter();this.mPlayerSprite.node.active=!1,cc.resources.load(p.UserProfile.Instance.CHARACTER_ROOT_PATH+o.path,cc.SpriteFrame,null,function(t,o){o&&e.SetPlayerSpriteFrame(o)}),this.SetPlayerName(o.assetName),this.mBotProfile=p.UserProfile.Instance.GetRandomProfileForBot(),this.mBotSprite.node.active=!1,cc.resources.load(p.UserProfile.Instance.CHARACTER_ROOT_PATH+this.mBotProfile.path,cc.SpriteFrame,null,function(t,o){o&&e.SetBotSpriteFrame(o)}),this.SetBotName(this.mBotProfile.assetName);break;case i.GO_TO_MAIN_MENU:f.StateMainMenu.Instance.SetStateInit();break;case i.PLAY:c.MessageMgr.SendMessage(s.GAME_MESSAGE.STATE_DUEL_MODE);break;case i.END:this.mUI.active=!1}},e.prototype.update=function(){switch(this.mState){case i.INIT:this.SetState(i.ACTIVE);break;case i.ACTIVE:break;case i.GO_TO_MAIN_MENU:case i.PLAY:this.SetState(i.END);break;case i.END:}},e.prototype.OnMessage=function(t){switch(t){case s.GAME_MESSAGE.STATE_DUEL_MODE_BET:this.SetState(i.INIT)}},e.prototype.OnClickButtonMainMenu=function(){switch(console.log("OnClickButtonMainMenu"),this.mState){case i.ACTIVE:this.SetState(i.GO_TO_MAIN_MENU)}},e.prototype.OnClickButtonPlay=function(){switch(this.mState){case i.ACTIVE:this.SetState(i.PLAY)}},e.prototype.GetBotProfile=function(){return this.mBotProfile},e.prototype.SetPlayerName=function(t){this.mPlayerName.string=t,u.StateDuelModeLose.Instance.SetPlayerName(t),h.StateDuelModeWin.Instance.SetPlayerName(t),l.StateDuelModeDraw.Instance.SetPlayerName(t)},e.prototype.SetBotName=function(t){this.mBotName.string=t,u.StateDuelModeLose.Instance.SetBotName(t),h.StateDuelModeWin.Instance.SetBotName(t),l.StateDuelModeDraw.Instance.SetBotName(t)},e.prototype.SetPlayerSpriteFrame=function(t){this.mPlayerSprite.node.active=!0,this.mPlayerSprite.spriteFrame=t,u.StateDuelModeLose.Instance.SetPlayerSpriteFrame(t),h.StateDuelModeWin.Instance.SetPlayerSpriteFrame(t),l.StateDuelModeDraw.Instance.SetPlayerSpriteFrame(t)},e.prototype.SetBotSpriteFrame=function(t){this.mBotSprite.node.active=!0,this.mBotSprite.spriteFrame=t,u.StateDuelModeLose.Instance.SetBotSpriteFrame(t),h.StateDuelModeWin.Instance.SetBotSpriteFrame(t),l.StateDuelModeDraw.Instance.SetBotSpriteFrame(t)},a([d(cc.Node)],e.prototype,"mUI",void 0),a([d(cc.Node)],e.prototype,"mButtonMainMenu",void 0),a([d(cc.Node)],e.prototype,"mButtonPlay",void 0),a([d(cc.Sprite)],e.prototype,"mPlayerSprite",void 0),a([d(cc.Label)],e.prototype,"mPlayerName",void 0),a([d(cc.Sprite)],e.prototype,"mBotSprite",void 0),a([d(cc.Label)],e.prototype,"mBotName",void 0),o=a([_],e)}(cc.Component);o.StateDuelModeBet=m,cc._RF.pop()},{"../GameDefine":"GameDefine","../MessageMgr":"MessageMgr","../UserProfile":"UserProfile","./StateDuelModeDraw":"StateDuelModeDraw","./StateDuelModeLose":"StateDuelModeLose","./StateDuelModeWin":"StateDuelModeWin","./StateMainMenu":"StateMainMenu"}],StateDuelModeDraw:[function(t,e,o){"use strict";cc._RF.push(e,"8fad2AoUhBL6YTD7WeYE6Sq","StateDuelModeDraw");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.StateDuelModeDraw=void 0;var i,s=t("../GameDefine"),c=t("../MessageMgr"),p=t("./StateMainMenu"),l=cc._decorator,u=l.ccclass,h=l.property;(function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.ACTIVE=2]="ACTIVE",t[t.PLAY_AGAIN=3]="PLAY_AGAIN",t[t.GO_TO_MAIN_MENU=4]="GO_TO_MAIN_MENU",t[t.END=5]="END"})(i||(i={}));var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return r(e,t),o=e,Object.defineProperty(e,"Instance",{get:function(){return o.mInstance},enumerable:!1,configurable:!0}),e.prototype.onEnable=function(){c.MessageMgr.AddListener(this.OnMessage.bind(this),this.node.uuid),this.mButtonMainMenu.node.on("click",this.OnClickButtonMainMenu,this),this.mButtonPlayAgain.node.on("click",this.OnClickButtonPlayAgain,this)},e.prototype.onDisable=function(){c.MessageMgr.RemoveListener(this.node.uuid),this.mButtonMainMenu.node.off("click",this.OnClickButtonMainMenu,this),this.mButtonPlayAgain.node.off("click",this.OnClickButtonPlayAgain,this)},e.prototype.onLoad=function(){o.mInstance=this},e.prototype.start=function(){this.SetState(i.END)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case i.INIT:this.mUI.active=!0;break;case i.ACTIVE:break;case i.PLAY_AGAIN:c.MessageMgr.SendMessage(s.GAME_MESSAGE.STATE_DUEL_MODE_BET);break;case i.GO_TO_MAIN_MENU:p.StateMainMenu.Instance.SetStateInit();break;case i.END:this.mUI.active=!1}},e.prototype.update=function(){switch(this.mState){case i.INIT:this.SetState(i.ACTIVE);break;case i.ACTIVE:break;case i.PLAY_AGAIN:case i.GO_TO_MAIN_MENU:this.SetState(i.END);break;case i.END:}},e.prototype.OnMessage=function(t){switch(t){case s.GAME_MESSAGE.STATE_DUEL_MODE_DRAW:this.SetState(i.INIT)}},e.prototype.OnClickButtonMainMenu=function(){switch(console.log("StateDuelModeDraw - OnClickButtonMainMenu"),this.mState){case i.ACTIVE:this.SetState(i.GO_TO_MAIN_MENU)}},e.prototype.OnClickButtonPlayAgain=function(){switch(console.log("StateDuelModeDraw - OnClickButtonPlayAgain"),this.mState){case i.ACTIVE:this.SetState(i.PLAY_AGAIN)}},e.prototype.SetPlayerName=function(t){this.mPlayerName.string=t},e.prototype.SetBotName=function(t){this.mBotName.string=t},e.prototype.SetPlayerSpriteFrame=function(t){this.mPlayerSprite.node.active=!0,this.mPlayerSprite.spriteFrame=t},e.prototype.SetBotSpriteFrame=function(t){this.mBotSprite.node.active=!0,this.mBotSprite.spriteFrame=t},a([h(cc.Node)],e.prototype,"mUI",void 0),a([h(cc.Button)],e.prototype,"mButtonMainMenu",void 0),a([h(cc.Button)],e.prototype,"mButtonPlayAgain",void 0),a([h(cc.Sprite)],e.prototype,"mPlayerSprite",void 0),a([h(cc.Label)],e.prototype,"mPlayerName",void 0),a([h(cc.Sprite)],e.prototype,"mBotSprite",void 0),a([h(cc.Label)],e.prototype,"mBotName",void 0),o=a([u],e)}(cc.Component);o.StateDuelModeDraw=f,cc._RF.pop()},{"../GameDefine":"GameDefine","../MessageMgr":"MessageMgr","./StateMainMenu":"StateMainMenu"}],StateDuelModeLose:[function(t,e,o){"use strict";cc._RF.push(e,"0b7d1D4LsRMM5gjuT6bDbFK","StateDuelModeLose");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.StateDuelModeLose=void 0;var i,s=t("../GameDefine"),c=t("../MessageMgr"),p=t("./StateMainMenu"),l=cc._decorator,u=l.ccclass,h=l.property;(function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.ACTIVE=2]="ACTIVE",t[t.PLAY_AGAIN=3]="PLAY_AGAIN",t[t.GO_TO_MAIN_MENU=4]="GO_TO_MAIN_MENU",t[t.END=5]="END"})(i||(i={}));var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return r(e,t),o=e,Object.defineProperty(e,"Instance",{get:function(){return o.mInstance},enumerable:!1,configurable:!0}),e.prototype.onEnable=function(){c.MessageMgr.AddListener(this.OnMessage.bind(this),this.node.uuid),this.mButtonMainMenu.node.on("click",this.OnClickButtonMainMenu,this),this.mButtonPlayAgain.node.on("click",this.OnClickButtonPlayAgain,this)},e.prototype.onDisable=function(){c.MessageMgr.RemoveListener(this.node.uuid),this.mButtonMainMenu.node.off("click",this.OnClickButtonMainMenu,this),this.mButtonPlayAgain.node.off("click",this.OnClickButtonPlayAgain,this)},e.prototype.onLoad=function(){o.mInstance=this},e.prototype.start=function(){this.SetState(i.END)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case i.INIT:this.mUI.active=!0;break;case i.ACTIVE:break;case i.PLAY_AGAIN:c.MessageMgr.SendMessage(s.GAME_MESSAGE.STATE_DUEL_MODE_BET);break;case i.GO_TO_MAIN_MENU:p.StateMainMenu.Instance.SetStateInit();break;case i.END:this.mUI.active=!1}},e.prototype.update=function(){switch(this.mState){case i.INIT:this.SetState(i.ACTIVE);break;case i.ACTIVE:break;case i.PLAY_AGAIN:case i.GO_TO_MAIN_MENU:this.SetState(i.END);break;case i.END:}},e.prototype.OnMessage=function(t){switch(t){case s.GAME_MESSAGE.STATE_DUEL_MODE_LOSE:this.SetState(i.INIT)}},e.prototype.OnClickButtonMainMenu=function(){switch(console.log("StateDuelModeLose - OnClickButtonMainMenu"),this.mState){case i.ACTIVE:this.SetState(i.GO_TO_MAIN_MENU)}},e.prototype.OnClickButtonPlayAgain=function(){switch(console.log("StateDuelModeLose - OnClickButtonPlayAgain"),this.mState){case i.ACTIVE:this.SetState(i.PLAY_AGAIN)}},e.prototype.SetPlayerName=function(t){this.mPlayerName.string=t},e.prototype.SetBotName=function(t){this.mBotName.string=t},e.prototype.SetPlayerSpriteFrame=function(t){this.mPlayerSprite.node.active=!0,this.mPlayerSprite.spriteFrame=t},e.prototype.SetBotSpriteFrame=function(t){this.mBotSprite.node.active=!0,this.mBotSprite.spriteFrame=t},a([h(cc.Node)],e.prototype,"mUI",void 0),a([h(cc.Button)],e.prototype,"mButtonMainMenu",void 0),a([h(cc.Button)],e.prototype,"mButtonPlayAgain",void 0),a([h(cc.Sprite)],e.prototype,"mPlayerSprite",void 0),a([h(cc.Label)],e.prototype,"mPlayerName",void 0),a([h(cc.Sprite)],e.prototype,"mBotSprite",void 0),a([h(cc.Label)],e.prototype,"mBotName",void 0),o=a([u],e)}(cc.Component);o.StateDuelModeLose=f,cc._RF.pop()},{"../GameDefine":"GameDefine","../MessageMgr":"MessageMgr","./StateMainMenu":"StateMainMenu"}],StateDuelModeWin:[function(t,e,o){"use strict";cc._RF.push(e,"4e4692nyzVFbKAXQlaI6vLa","StateDuelModeWin");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.StateDuelModeWin=void 0;var i,s=t("../GameDefine"),c=t("../MessageMgr"),p=t("./StateMainMenu"),l=cc._decorator,u=l.ccclass,h=l.property;(function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.ACTIVE=2]="ACTIVE",t[t.PLAY_AGAIN=3]="PLAY_AGAIN",t[t.GO_TO_MAIN_MENU=4]="GO_TO_MAIN_MENU",t[t.END=5]="END"})(i||(i={}));var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return r(e,t),o=e,Object.defineProperty(e,"Instance",{get:function(){return o.mInstance},enumerable:!1,configurable:!0}),e.prototype.onEnable=function(){c.MessageMgr.AddListener(this.OnMessage.bind(this),this.node.uuid),this.mButtonMainMenu.node.on("click",this.OnClickButtonMainMenu,this),this.mButtonPlayAgain.node.on("click",this.OnClickButtonPlayAgain,this)},e.prototype.onDisable=function(){c.MessageMgr.RemoveListener(this.node.uuid),this.mButtonMainMenu.node.off("click",this.OnClickButtonMainMenu,this),this.mButtonPlayAgain.node.off("click",this.OnClickButtonPlayAgain,this)},e.prototype.onLoad=function(){o.mInstance=this},e.prototype.start=function(){this.SetState(i.END)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case i.INIT:this.mUI.active=!0;break;case i.ACTIVE:break;case i.PLAY_AGAIN:c.MessageMgr.SendMessage(s.GAME_MESSAGE.STATE_DUEL_MODE_BET);break;case i.GO_TO_MAIN_MENU:p.StateMainMenu.Instance.SetStateInit();break;case i.END:this.mUI.active=!1}},e.prototype.update=function(){switch(this.mState){case i.INIT:this.SetState(i.ACTIVE);break;case i.ACTIVE:break;case i.PLAY_AGAIN:case i.GO_TO_MAIN_MENU:this.SetState(i.END);break;case i.END:}},e.prototype.OnMessage=function(t){switch(t){case s.GAME_MESSAGE.STATE_DUEL_MODE_WIN:this.SetState(i.INIT)}},e.prototype.OnClickButtonMainMenu=function(){switch(console.log("StateDuelModeWin - OnClickButtonMainMenu"),this.mState){case i.ACTIVE:this.SetState(i.GO_TO_MAIN_MENU)}},e.prototype.OnClickButtonPlayAgain=function(){switch(console.log("StateDuelModeWin - OnClickButtonPlayAgain"),this.mState){case i.ACTIVE:this.SetState(i.PLAY_AGAIN)}},e.prototype.SetPlayerName=function(t){this.mPlayerName.string=t},e.prototype.SetBotName=function(t){this.mBotName.string=t},e.prototype.SetPlayerSpriteFrame=function(t){this.mPlayerSprite.node.active=!0,this.mPlayerSprite.spriteFrame=t},e.prototype.SetBotSpriteFrame=function(t){this.mBotSprite.node.active=!0,this.mBotSprite.spriteFrame=t},a([h(cc.Node)],e.prototype,"mUI",void 0),a([h(cc.Button)],e.prototype,"mButtonMainMenu",void 0),a([h(cc.Button)],e.prototype,"mButtonPlayAgain",void 0),a([h(cc.Sprite)],e.prototype,"mPlayerSprite",void 0),a([h(cc.Label)],e.prototype,"mPlayerName",void 0),a([h(cc.Sprite)],e.prototype,"mBotSprite",void 0),a([h(cc.Label)],e.prototype,"mBotName",void 0),o=a([u],e)}(cc.Component);o.StateDuelModeWin=f,cc._RF.pop()},{"../GameDefine":"GameDefine","../MessageMgr":"MessageMgr","./StateMainMenu":"StateMainMenu"}],StateDuelMode:[function(t,e,o){"use strict";cc._RF.push(e,"c3b10WMH/NIZ49v4u1wuS2O","StateDuelMode");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.StateDuelMode=void 0;var i,s=t("../GameDefine"),c=t("../Ingame/LevelMgr"),p=t("../MessageMgr"),l=t("./StateMainMenu"),u=cc._decorator,h=u.ccclass,f=u.property;(function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.CLEAR_LEVEL=2]="CLEAR_LEVEL",t[t.LOAD_LEVEL=3]="LOAD_LEVEL",t[t.PLAYING=4]="PLAYING",t[t.DETECT_RESULT=5]="DETECT_RESULT",t[t.WIN=6]="WIN",t[t.WIN_END=7]="WIN_END",t[t.LOSE=8]="LOSE",t[t.LOSE_END=9]="LOSE_END",t[t.DRAW=10]="DRAW",t[t.DRAW_END=11]="DRAW_END",t[t.GO_TO_MAIN_MENU=12]="GO_TO_MAIN_MENU",t[t.END=13]="END"})(i||(i={}));var S=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return r(e,t),o=e,Object.defineProperty(e,"Instance",{get:function(){return o.mInstance},enumerable:!1,configurable:!0}),e.prototype.onEnable=function(){p.MessageMgr.AddListener(this.OnMessage.bind(this),this.node.uuid),this.mButtonMainMenu.on("click",this.OnClickButtonMainMenu,this)},e.prototype.onDisable=function(){p.MessageMgr.RemoveListener(this.node.uuid),this.mButtonMainMenu.off("click",this.OnClickButtonMainMenu,this)},e.prototype.onLoad=function(){o.mInstance=this},e.prototype.start=function(){this.SetState(i.END)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case i.INIT:this.mUI.active=!0,this.mUILoading.active=!0,this.mPlayerList=[],this.mShootList=[],s.GameDefine.CanvasGameUpdateAlignment();break;case i.CLEAR_LEVEL:c.LevelMgr.Instance.ClearLevel();break;case i.LOAD_LEVEL:this.mPercent=0,this.mCountTime=0,this.mCountLoadingMax=0,this.mCountLoading=0,this.mCountEnemy=0,c.LevelMgr.Instance.LoadLevelDuelMode();break;case i.PLAYING:this.mUILoading.active=!1,this.mShootList=s.GameDefine.ConfuseArray(this.mShootList,10),this.mShootIndex=-1,this.mIsCallNextTurn=!0;break;case i.DETECT_RESULT:p.MessageMgr.SendMessage(s.GAME_MESSAGE.DUEL_MODE_DETECT_RESULT,this.mPlayerList[0]);break;case i.WIN:this.mPercent=0,p.MessageMgr.SendMessage(s.GAME_MESSAGE.PLAYER_WIN);break;case i.WIN_END:p.MessageMgr.SendMessage(s.GAME_MESSAGE.STATE_DUEL_MODE_WIN);break;case i.LOSE:this.mPercent=0,p.MessageMgr.SendMessage(s.GAME_MESSAGE.PLAYER_WIN);break;case i.LOSE_END:p.MessageMgr.SendMessage(s.GAME_MESSAGE.STATE_DUEL_MODE_LOSE);break;case i.DRAW:this.mPercent=0,p.MessageMgr.SendMessage(s.GAME_MESSAGE.PLAYER_WIN);break;case i.DRAW_END:p.MessageMgr.SendMessage(s.GAME_MESSAGE.STATE_DUEL_MODE_DRAW);break;case i.GO_TO_MAIN_MENU:l.StateMainMenu.Instance.SetStateInit();break;case i.END:c.LevelMgr.Instance.ClearLevel(),this.mUI.active=!1}},e.prototype.update=function(t){switch(this.mState){case i.INIT:this.SetState(i.CLEAR_LEVEL);break;case i.CLEAR_LEVEL:c.LevelMgr.Instance.IsClearedLevel()&&this.SetState(i.LOAD_LEVEL);break;case i.LOAD_LEVEL:this.mCountTime+=t,this.mPercent=this.mCountLoading>=this.mCountLoadingMax?this.mPercent+.1:0,this.mCountTime>=1&&this.mPercent>=1&&this.SetState(i.PLAYING);break;case i.PLAYING:this.UpdateCallPlayerReadyAim(),1==this.mPlayerList.length?this.SetState(i.DETECT_RESULT):this.mShootList.length<=0&&this.SetState(i.DRAW);break;case i.DETECT_RESULT:break;case i.WIN:this.mPercent=s.GameDefine.MoveToTarget(this.mPercent,1,.5,t),this.mPercent>=1&&this.SetState(i.WIN_END);break;case i.WIN_END:this.SetState(i.END);break;case i.LOSE:this.mPercent=s.GameDefine.MoveToTarget(this.mPercent,1,.5,t),this.mPercent>=1&&this.SetState(i.LOSE_END);break;case i.LOSE_END:this.SetState(i.END);break;case i.DRAW:this.mPercent=s.GameDefine.MoveToTarget(this.mPercent,1,.5,t),this.mPercent>=1&&this.SetState(i.DRAW_END);break;case i.DRAW_END:case i.GO_TO_MAIN_MENU:this.SetState(i.END);break;case i.END:}},e.prototype.OnMessage=function(t,e){switch(t){case s.GAME_MESSAGE.STATE_DUEL_MODE:switch(this.mState){case i.END:this.SetState(i.INIT)}break;case s.GAME_MESSAGE.ADD_ENEMY:switch(this.mState){case i.LOAD_LEVEL:case i.PLAYING:this.mCountEnemy+=e}break;case s.GAME_MESSAGE.ADD_TO_PLAYER_LIST:switch(this.mState){case i.LOAD_LEVEL:this.mPlayerList.push(e)}break;case s.GAME_MESSAGE.REMOVE_FROM_PLAYER_LIST:switch(this.mState){case i.PLAYING:for(var o=0;o<this.mPlayerList.length;o++)if(this.mPlayerList[o]==e){this.mPlayerList.splice(o,1);break}}break;case s.GAME_MESSAGE.ADD_TO_SHOOT_LIST:switch(this.mState){case i.LOAD_LEVEL:this.mShootList.push(e)}break;case s.GAME_MESSAGE.REMOVE_FROM_SHOOT_LIST:switch(this.mState){case i.PLAYING:for(o=0;o<this.mShootList.length;o++)if(this.mShootList[o]==e){this.mShootList.splice(o,1),o<=this.mShootIndex&&(this.mShootIndex-=1,this.mShootIndex<0&&(this.mShootIndex+=this.mShootList.length));break}}break;case s.GAME_MESSAGE.END_PLAYER_TURN:switch(this.mState){case i.PLAYING:this.mShootList.length>0&&this.mShootIndex>=0&&this.mShootList[this.mShootIndex%this.mShootList.length]==e&&(this.mIsCallNextTurn=!0)}break;case s.GAME_MESSAGE.DUEL_MODE_WIN:switch(this.mState){case i.DETECT_RESULT:this.SetState(i.WIN)}break;case s.GAME_MESSAGE.DUEL_MODE_LOSE:switch(this.mState){case i.DETECT_RESULT:this.SetState(i.LOSE)}}},e.prototype.OnClickButtonMainMenu=function(){switch(console.log("OnClickButtonMainMenu"),this.mState){case i.PLAYING:this.SetState(i.GO_TO_MAIN_MENU)}},e.prototype.AddCountLoadingMax=function(t){switch(void 0===t&&(t=1),this.mState){case i.LOAD_LEVEL:this.mCountLoadingMax+=t}},e.prototype.AddCountLoading=function(t){switch(void 0===t&&(t=1),this.mState){case i.LOAD_LEVEL:this.mCountLoading+=t}},e.prototype.UpdateCallPlayerReadyAim=function(){this.mIsCallNextTurn&&(this.mIsCallNextTurn=!1,this.mShootIndex=(this.mShootIndex+1)%this.mShootList.length,p.MessageMgr.SendMessage(s.GAME_MESSAGE.START_PLAYER_TURN,this.mShootList[this.mShootIndex%this.mShootList.length]))},a([f(cc.Node)],e.prototype,"mUI",void 0),a([f(cc.Node)],e.prototype,"mUILoading",void 0),a([f(cc.Node)],e.prototype,"mButtonMainMenu",void 0),o=a([h],e)}(cc.Component);o.StateDuelMode=S,cc._RF.pop()},{"../GameDefine":"GameDefine","../Ingame/LevelMgr":"LevelMgr","../MessageMgr":"MessageMgr","./StateMainMenu":"StateMainMenu"}],StateEndGameLose:[function(t,e,o){"use strict";cc._RF.push(e,"6be48w6ba9BJZcq1CXiyi5X","StateEndGameLose");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.StateEndGameLose=void 0;var i,s=t("../GameDefine"),c=t("../Ingame/LevelMgr"),p=t("../MessageMgr"),l=t("./StateIngame"),u=t("./StateMainMenu"),h=cc._decorator,f=h.ccclass,S=h.property;(function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.ACTIVE=2]="ACTIVE",t[t.RETRY=3]="RETRY",t[t.MAIN_MENU=4]="MAIN_MENU",t[t.END=5]="END"})(i||(i={}));var _=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onEnable=function(){p.MessageMgr.AddListener(this.OnMessage.bind(this),this.node.uuid),this.mButtonMainMenu.node.on("click",this.OnClickButtonMainMenu,this),this.mButtonRestart.node.on("click",this.OnClickButtonRestart,this)},e.prototype.onDisable=function(){p.MessageMgr.RemoveListener(this.node.uuid),this.mButtonMainMenu.node.off("click",this.OnClickButtonMainMenu,this),this.mButtonRestart.node.off("click",this.OnClickButtonRestart,this)},e.prototype.start=function(){this.SetState(i.END)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case i.INIT:this.mUIEndGame.active=!0;break;case i.ACTIVE:break;case i.RETRY:l.StateIngame.Instance.SetStateInit();break;case i.MAIN_MENU:c.LevelMgr.Instance.ClearLevel(),u.StateMainMenu.Instance.SetStateInit();break;case i.END:this.mUIEndGame.active=!1}},e.prototype.update=function(){switch(this.mState){case i.INIT:this.SetState(i.ACTIVE);break;case i.ACTIVE:break;case i.RETRY:case i.MAIN_MENU:this.SetState(i.END);break;case i.END:}},e.prototype.OnMessage=function(t){switch(t){case s.GAME_MESSAGE.STATE_END_GAME_LOSE:this.SetState(i.INIT)}},e.prototype.OnClickButtonMainMenu=function(){switch(console.log("StateEndGameLose - OnClickButtonMainMenu"),this.mState){case i.ACTIVE:this.SetState(i.MAIN_MENU)}},e.prototype.OnClickButtonRestart=function(){switch(console.log("StateEndGameLose - OnClickButtonRestart"),this.mState){case i.ACTIVE:this.SetState(i.RETRY)}},e.prototype.OnClickButtonRetry=function(){switch(this.mState){case i.ACTIVE:this.SetState(i.RETRY)}},a([S(cc.Node)],e.prototype,"mUIEndGame",void 0),a([S(cc.Button)],e.prototype,"mButtonMainMenu",void 0),a([S(cc.Button)],e.prototype,"mButtonRestart",void 0),a([f],e)}(cc.Component);o.StateEndGameLose=_,cc._RF.pop()},{"../GameDefine":"GameDefine","../Ingame/LevelMgr":"LevelMgr","../MessageMgr":"MessageMgr","./StateIngame":"StateIngame","./StateMainMenu":"StateMainMenu"}],StateEndGameWin:[function(t,e,o){"use strict";cc._RF.push(e,"6d053Zp6BVEtL/iVAJ/BNQb","StateEndGameWin");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.StateEndGameWin=void 0;var i,s=t("../API"),c=t("../GameDefine"),p=t("../Ingame/LevelMgr"),l=t("../Ingame/UIBulletMgr"),u=t("../MessageMgr"),h=t("../UserProfile"),f=t("./StateIngame"),S=t("./StateMainMenu"),_=cc._decorator,d=_.ccclass,m=_.property;(function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.GET_RESULT_FROM_SERVER=2]="GET_RESULT_FROM_SERVER",t[t.ACTIVE=3]="ACTIVE",t[t.NEXT_LEVEL=4]="NEXT_LEVEL",t[t.RESTART=5]="RESTART",t[t.MAIN_MENU=6]="MAIN_MENU",t[t.END=7]="END",t[t.FORCE_END=8]="FORCE_END"})(i||(i={}));var y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mArrStar=[],e}return r(e,t),e.prototype.onEnable=function(){u.MessageMgr.AddListener(this.OnMessage.bind(this),this.node.uuid),this.mButtonMainMenu.node.on("click",this.OnClickButtonMainMenu,this),this.mButtonRestart.node.on("click",this.OnClickButtonRestart,this)},e.prototype.onDisable=function(){u.MessageMgr.RemoveListener(this.node.uuid),this.mButtonMainMenu.node.off("click",this.OnClickButtonMainMenu,this),this.mButtonRestart.node.off("click",this.OnClickButtonRestart,this)},e.prototype.start=function(){this.SetState(i.END)},e.prototype.SetState=function(t){var e=this;switch(this.mState=t,this.mState){case i.INIT:this.mUIEndGame.active=!0,this.mCharacterCard.active=!1,this.SetBonusCoinCurrent(0);var o=l.UIBulletMgr.Instance.GetStarResult();u.MessageMgr.SendMessage(c.GAME_MESSAGE.UPDATE_LEVEL_BUTTO_STAR,{level:h.UserProfile.Instance.GetCurrentLevel(),star:o});break;case i.GET_RESULT_FROM_SERVER:this.mGameResult=null,o=l.UIBulletMgr.Instance.GetStarResult(),s.API.Instance.UpdateLevel({gameId:s.API.Instance.GAME_ID,gameSessionId:s.API.Instance.GAME_SESSION_ID,playtime:1e3,map:h.UserProfile.Instance.GetCurrentMap(),level:h.UserProfile.Instance.GetCurrentLevel(),star:o,score:100*o}).then(function(t){console.log("UpdateLevel"),console.log(t.responseText),console.log(JSON.parse(t.responseText));var o=JSON.parse(t.responseText);null==o.errorCode&&(e.mGameResult=o,null!=o.data.rewardAssets&&o.data.rewardAssets.length>0&&e.SetupCharacterCardReward(o.data.rewardAssets[0]),null!=o.data.score&&o.data.score>0&&(e.mBonusCoinTarget=o.data.score),c.GameDefine.IS_DEBUG&&(o.data.assetError="asset het han"),null!=o.data.assetError&&(u.MessageMgr.SendMessage(c.GAME_MESSAGE.POPUP_ASSET_ERROR,{message:o.data.assetError}),p.LevelMgr.Instance.ClearLevel(),e.SetState(i.END)))}).catch();break;case i.ACTIVE:this.SetupNumberOfStar();break;case i.NEXT_LEVEL:h.UserProfile.Instance.AddCurrentLevel(1),f.StateIngame.Instance.SetStateInit();break;case i.RESTART:f.StateIngame.Instance.SetStateInit();break;case i.MAIN_MENU:p.LevelMgr.Instance.ClearLevel(),S.StateMainMenu.Instance.SetStateInit();break;case i.END:this.mUIEndGame.active=!1}},e.prototype.update=function(t){switch(this.mState){case i.INIT:this.SetState(i.GET_RESULT_FROM_SERVER);break;case i.GET_RESULT_FROM_SERVER:null!=this.mGameResult&&this.SetState(i.ACTIVE);break;case i.ACTIVE:this.UpdateBonusCoin(t);break;case i.NEXT_LEVEL:case i.RESTART:case i.MAIN_MENU:this.SetState(i.END);break;case i.END:}},e.prototype.OnMessage=function(t){switch(t){case c.GAME_MESSAGE.STATE_END_GAME_WIN:this.SetState(i.INIT)}},e.prototype.OnClickButtonMainMenu=function(){switch(console.log("StateEndGameWin - OnClickButtonMainMenu"),this.mState){case i.ACTIVE:this.SetState(i.MAIN_MENU)}},e.prototype.OnClickButtonRestart=function(){switch(console.log("StateEndGameWin - OnClickButtonRestart"),this.mState){case i.ACTIVE:this.SetState(i.RESTART)}},e.prototype.OnClickButtonNext=function(){switch(this.mState){case i.ACTIVE:this.SetState(i.NEXT_LEVEL)}},e.prototype.SetupNumberOfStar=function(){for(var t=l.UIBulletMgr.Instance.GetStarResult(),e=0;e<this.mArrStar.length;e++)this.mArrStar[e].active=e<t},e.prototype.SetupCharacterCardReward=function(t){var e=this,o=h.UserProfile.Instance.GetAssetInfoByAssetId(t);null==o?this.mCharacterCard.active=!1:(o.card++,this.mCharacterCard.active=!1,this.mCharacterAvatarSprite.node.active=!1,cc.resources.load(h.UserProfile.Instance.CHARACTER_ROOT_PATH+o.path,cc.SpriteFrame,null,function(t,o){e.mCharacterAvatarSprite.node.active=!0,e.mCharacterAvatarSprite.spriteFrame=o,e.mCharacterCard.active=!0,e.mCharacterCard.scale=3,e.mCharacterCard.rotation=360,e.mCharacterCard.opacity=0,cc.tween(e.mCharacterCard).to(.4,{scale:.8}).to(.1,{scale:1.3}).to(.1,{scale:1}).start(),cc.tween(e.mCharacterCard).to(.4,{rotation:0}).start(),cc.tween(e.mCharacterCard).to(.3,{opacity:255}).start()}))},e.prototype.SetBonusCoinCurrent=function(t){this.mBonusCoinCurrent=t,this.mBonusCoinLabel.string="+"+Math.floor(this.mBonusCoinCurrent)},e.prototype.UpdateBonusCoin=function(t){var e=c.GameDefine.MoveToTarget(this.mBonusCoinCurrent,this.mBonusCoinTarget,100,t);this.SetBonusCoinCurrent(e)},a([m(cc.Node)],e.prototype,"mUIEndGame",void 0),a([m(cc.Button)],e.prototype,"mButtonMainMenu",void 0),a([m(cc.Button)],e.prototype,"mButtonRestart",void 0),a([m({type:[cc.Node]})],e.prototype,"mArrStar",void 0),a([m(cc.Node)],e.prototype,"mCharacterCard",void 0),a([m(cc.Sprite)],e.prototype,"mCharacterAvatarSprite",void 0),a([m(cc.Label)],e.prototype,"mBonusCoinLabel",void 0),a([d],e)}(cc.Component);o.StateEndGameWin=y,cc._RF.pop()},{"../API":"API","../GameDefine":"GameDefine","../Ingame/LevelMgr":"LevelMgr","../Ingame/UIBulletMgr":"UIBulletMgr","../MessageMgr":"MessageMgr","../UserProfile":"UserProfile","./StateIngame":"StateIngame","./StateMainMenu":"StateMainMenu"}],StateIngame:[function(t,e,o){"use strict";cc._RF.push(e,"3ae409jzGhD75OX4os06vWg","StateIngame");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.StateIngame=void 0;var i,s=t("../GameDefine"),c=t("../Ingame/LevelMgr"),p=t("../MessageMgr"),l=t("../UserProfile"),u=t("./StateMainMenu"),h=cc._decorator,f=h.ccclass,S=h.property;(function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.CLEAR_LEVEL=2]="CLEAR_LEVEL",t[t.LOAD_LEVEL=3]="LOAD_LEVEL",t[t.PLAYING=4]="PLAYING",t[t.DETECT_RESULT=5]="DETECT_RESULT",t[t.WIN=6]="WIN",t[t.WIN_END=7]="WIN_END",t[t.LOSE=8]="LOSE",t[t.LOSE_END=9]="LOSE_END",t[t.DRAW=10]="DRAW",t[t.DRAW_END=11]="DRAW_END",t[t.GO_TO_MAIN_MENU=12]="GO_TO_MAIN_MENU",t[t.END=13]="END"})(i||(i={}));var _=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return r(e,t),o=e,Object.defineProperty(e,"Instance",{get:function(){return o.mInstance},enumerable:!1,configurable:!0}),e.prototype.onEnable=function(){p.MessageMgr.AddListener(this.OnMessage.bind(this),this.node.uuid),this.mButtonMainMenu.node.on("click",this.OnClickButtonMainMenu,this),this.mButtonRestart.node.on("click",this.OnClickButtonRestart,this)},e.prototype.onDisable=function(){p.MessageMgr.RemoveListener(this.node.uuid),this.mButtonMainMenu.node.off("click",this.OnClickButtonMainMenu,this),this.mButtonRestart.node.off("click",this.OnClickButtonRestart,this)},e.prototype.onLoad=function(){o.mInstance=this},e.prototype.start=function(){this.SetState(i.END)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case i.INIT:this.mUIIngame.active=!0,this.mUILoading.active=!0,this.mPlayerList=[],this.mShootList=[],s.GameDefine.CanvasGameUpdateAlignment();break;case i.CLEAR_LEVEL:c.LevelMgr.Instance.ClearLevel();break;case i.LOAD_LEVEL:this.mPercent=0,this.mCountTime=0,this.mCountLoadingMax=0,this.mCountLoading=0,this.mCountEnemy=0,c.LevelMgr.Instance.LoadLevel();break;case i.PLAYING:this.mUILoading.active=!1,this.mShootList=s.GameDefine.ConfuseArray(this.mShootList,10),this.mShootIndex=-1,this.mIsCallNextTurn=!0,this.mLevelTitle.string="Level "+l.UserProfile.Instance.GetCurrentLevel();break;case i.DETECT_RESULT:p.MessageMgr.SendMessage(s.GAME_MESSAGE.DUEL_MODE_DETECT_RESULT,this.mPlayerList[0]);break;case i.WIN:this.mPercent=0,p.MessageMgr.SendMessage(s.GAME_MESSAGE.PLAYER_WIN);break;case i.WIN_END:p.MessageMgr.SendMessage(s.GAME_MESSAGE.STATE_END_GAME_WIN);break;case i.LOSE:this.mPercent=0,p.MessageMgr.SendMessage(s.GAME_MESSAGE.PLAYER_WIN);break;case i.LOSE_END:p.MessageMgr.SendMessage(s.GAME_MESSAGE.STATE_END_GAME_LOSE);break;case i.DRAW:this.mPercent=0,p.MessageMgr.SendMessage(s.GAME_MESSAGE.PLAYER_WIN);break;case i.DRAW_END:p.MessageMgr.SendMessage(s.GAME_MESSAGE.STATE_DUEL_MODE_DRAW);break;case i.GO_TO_MAIN_MENU:c.LevelMgr.Instance.ClearLevel(),u.StateMainMenu.Instance.SetStateInit();break;case i.END:this.mUIIngame.active=!1}},e.prototype.update=function(t){switch(this.mState){case i.INIT:this.SetState(i.CLEAR_LEVEL);break;case i.CLEAR_LEVEL:c.LevelMgr.Instance.IsClearedLevel()&&this.SetState(i.LOAD_LEVEL);break;case i.LOAD_LEVEL:this.mCountTime+=t,this.mPercent=this.mCountLoading>=this.mCountLoadingMax?this.mPercent+.1:0,this.mCountTime>=1&&this.mPercent>=1&&this.SetState(i.PLAYING);break;case i.PLAYING:this.UpdateCallPlayerReadyAim(),this.mCountEnemy<=0?this.SetState(i.WIN):this.mShootList.length<=0&&this.SetState(i.LOSE);break;case i.DETECT_RESULT:break;case i.WIN:this.mPercent=s.GameDefine.MoveToTarget(this.mPercent,1,.5,t),this.mPercent>=1&&this.SetState(i.WIN_END);break;case i.WIN_END:this.SetState(i.END);break;case i.LOSE:this.mPercent=s.GameDefine.MoveToTarget(this.mPercent,1,.5,t),this.mPercent>=1&&this.SetState(i.LOSE_END);break;case i.LOSE_END:this.SetState(i.END);break;case i.DRAW:this.mPercent=s.GameDefine.MoveToTarget(this.mPercent,1,.5,t),this.mPercent>=1&&this.SetState(i.DRAW_END);break;case i.DRAW_END:case i.GO_TO_MAIN_MENU:this.SetState(i.END);break;case i.END:}},e.prototype.OnMessage=function(t,e){switch(t){case s.GAME_MESSAGE.ADD_ENEMY:switch(this.mState){case i.LOAD_LEVEL:case i.PLAYING:this.mCountEnemy+=e}break;case s.GAME_MESSAGE.ADD_TO_PLAYER_LIST:switch(this.mState){case i.LOAD_LEVEL:this.mPlayerList.push(e)}break;case s.GAME_MESSAGE.REMOVE_FROM_PLAYER_LIST:switch(this.mState){case i.PLAYING:for(var o=0;o<this.mPlayerList.length;o++)if(this.mPlayerList[o]==e){this.mPlayerList.splice(o,1);break}}break;case s.GAME_MESSAGE.ADD_TO_SHOOT_LIST:switch(this.mState){case i.LOAD_LEVEL:this.mShootList.push(e)}break;case s.GAME_MESSAGE.REMOVE_FROM_SHOOT_LIST:switch(this.mState){case i.PLAYING:for(o=0;o<this.mShootList.length;o++)if(this.mShootList[o]==e){this.mShootList.splice(o,1),o<=this.mShootIndex&&(this.mShootIndex-=1,this.mShootIndex<0&&(this.mShootIndex+=this.mShootList.length));break}}break;case s.GAME_MESSAGE.END_PLAYER_TURN:switch(this.mState){case i.PLAYING:this.mShootList.length>0&&this.mShootIndex>=0&&this.mShootList[this.mShootIndex%this.mShootList.length]==e&&(this.mIsCallNextTurn=!0)}break;case s.GAME_MESSAGE.DUEL_MODE_WIN:switch(this.mState){case i.DETECT_RESULT:this.SetState(i.WIN)}break;case s.GAME_MESSAGE.DUEL_MODE_LOSE:switch(this.mState){case i.DETECT_RESULT:this.SetState(i.LOSE)}}},e.prototype.OnClickButtonMainMenu=function(){switch(console.log("StateIngame - OnClickButtonMainMenu"),this.mState){case i.PLAYING:this.SetState(i.GO_TO_MAIN_MENU)}},e.prototype.OnClickButtonRestart=function(){switch(console.log("StateIngame - OnClickButtonRestart"),this.mState){case i.PLAYING:this.SetState(i.INIT)}},e.prototype.SetStateInit=function(){switch(this.mState){case i.END:this.SetState(i.INIT)}},e.prototype.AddCountLoadingMax=function(t){switch(void 0===t&&(t=1),this.mState){case i.LOAD_LEVEL:this.mCountLoadingMax+=t}},e.prototype.AddCountLoading=function(t){switch(void 0===t&&(t=1),this.mState){case i.LOAD_LEVEL:this.mCountLoading+=t}},e.prototype.UpdateCallPlayerReadyAim=function(){this.mIsCallNextTurn&&(this.mIsCallNextTurn=!1,this.mShootIndex=(this.mShootIndex+1)%this.mShootList.length,p.MessageMgr.SendMessage(s.GAME_MESSAGE.START_PLAYER_TURN,this.mShootList[this.mShootIndex%this.mShootList.length]))},a([S(cc.Node)],e.prototype,"mUIIngame",void 0),a([S(cc.Node)],e.prototype,"mUILoading",void 0),a([S(cc.Label)],e.prototype,"mLevelTitle",void 0),a([S(cc.Button)],e.prototype,"mButtonMainMenu",void 0),a([S(cc.Button)],e.prototype,"mButtonRestart",void 0),o=a([f],e)}(cc.Component);o.StateIngame=_,cc._RF.pop()},{"../GameDefine":"GameDefine","../Ingame/LevelMgr":"LevelMgr","../MessageMgr":"MessageMgr","../UserProfile":"UserProfile","./StateMainMenu":"StateMainMenu"}],StateLevelList:[function(t,e,o){"use strict";cc._RF.push(e,"96056rMyEVCpqVxPE07rjus","StateLevelList");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.StateLevelList=void 0;var i,s=t("../API"),c=t("../GameDefine"),p=t("../LevelList/ButtonLevel"),l=t("../MessageMgr"),u=t("../UserProfile"),h=t("./StateIngame"),f=t("./StateMainMenu"),S=cc._decorator,_=S.ccclass,d=S.property;(function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.GET_GAME_RESULT_FROM_SERVER=2]="GET_GAME_RESULT_FROM_SERVER",t[t.CREATE_BUTTON=3]="CREATE_BUTTON",t[t.NORMAL=4]="NORMAL",t[t.GO_TO_MAIN_MENU=5]="GO_TO_MAIN_MENU",t[t.PLAY_GAME=6]="PLAY_GAME",t[t.END=7]="END"})(i||(i={}));var m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mIsCreateButtonLevel=!0,e.mIsUpdateButtonStar=!0,e}var o;return r(e,t),o=e,Object.defineProperty(e,"Instance",{get:function(){return o.mInstance},enumerable:!1,configurable:!0}),e.prototype.onEnable=function(){this.mButtonMainMenu.node.on("click",this.OnClickButtonMainMenu,this)},e.prototype.onDisable=function(){this.mButtonMainMenu.node.off("click",this.OnClickButtonMainMenu,this)},e.prototype.onLoad=function(){o.mInstance=this},e.prototype.start=function(){this.SetState(i.END)},e.prototype.SetState=function(t){var e=this;switch(this.mState=t,this.mState){case i.INIT:this.mUI.active=!0,this.CreateButtonLevel();break;case i.GET_GAME_RESULT_FROM_SERVER:s.API.Instance.GetGameResult().then(function(t){switch(console.log("GetGameResult"),console.log(t.responseText),console.log(JSON.parse(t.responseText)),e.mState){case i.GET_GAME_RESULT_FROM_SERVER:e.mGameResultFromServer=JSON.parse(t.responseText),e.SetState(i.CREATE_BUTTON)}}).catch();break;case i.CREATE_BUTTON:this.UpdateButtonStar();break;case i.NORMAL:break;case i.GO_TO_MAIN_MENU:f.StateMainMenu.Instance.SetStateInit();break;case i.PLAY_GAME:h.StateIngame.Instance.SetStateInit();break;case i.END:this.mUI.active=!1}},e.prototype.update=function(){switch(this.mState){case i.INIT:this.SetState(null==this.mGameResultFromServer?i.GET_GAME_RESULT_FROM_SERVER:i.CREATE_BUTTON);break;case i.GET_GAME_RESULT_FROM_SERVER:break;case i.CREATE_BUTTON:this.SetState(i.NORMAL);break;case i.NORMAL:break;case i.GO_TO_MAIN_MENU:case i.PLAY_GAME:this.SetState(i.END);break;case i.END:}},e.prototype.OnClickButtonMainMenu=function(){switch(this.mState){case i.NORMAL:this.SetState(i.GO_TO_MAIN_MENU)}},e.prototype.SetStateInit=function(){switch(this.mState){case i.END:this.SetState(i.INIT)}},e.prototype.OnClickButtonLevel=function(t){switch(this.mState){case i.NORMAL:u.UserProfile.Instance.SetCurrentLevel(t),this.SetState(i.PLAY_GAME)}},e.prototype.CreateButtonLevel=function(){if(this.mIsCreateButtonLevel){this.mIsCreateButtonLevel=!1;for(var t=u.UserProfile.Instance.GetMaxLevel(),e=1;e<=t;e++){var o=cc.instantiate(this.mPrefabButtonLevel);o.parent=this.mButtonContainer,o.getComponent(p.ButtonLevel).SetupInfo(e)}}},e.prototype.UpdateButtonStar=function(){this.mIsUpdateButtonStar&&(this.mIsUpdateButtonStar=!1,this.mGameResultFromServer.data[0].stars.forEach(function(t){l.MessageMgr.SendMessage(c.GAME_MESSAGE.UPDATE_LEVEL_BUTTO_STAR,{level:t.level,star:t.star})}))},a([d(cc.Node)],e.prototype,"mUI",void 0),a([d(cc.Button)],e.prototype,"mButtonMainMenu",void 0),a([d(cc.Node)],e.prototype,"mButtonContainer",void 0),a([d(cc.Prefab)],e.prototype,"mPrefabButtonLevel",void 0),o=a([_],e)}(cc.Component);o.StateLevelList=m,cc._RF.pop()},{"../API":"API","../GameDefine":"GameDefine","../LevelList/ButtonLevel":"ButtonLevel","../MessageMgr":"MessageMgr","../UserProfile":"UserProfile","./StateIngame":"StateIngame","./StateMainMenu":"StateMainMenu"}],StateMainMenu:[function(t,e,o){"use strict";cc._RF.push(e,"5811cw45WVNF7qlOXk8dC17","StateMainMenu");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.StateMainMenu=void 0;var i,s=t("../GameDefine"),c=t("../MessageMgr"),p=t("../UserProfile"),l=t("./StateCharacterList"),u=t("./StateIngame"),h=t("./StateLevelList"),f=cc._decorator,S=f.ccclass,_=f.property;(function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.NORMAL=2]="NORMAL",t[t.PLAY_GAME=3]="PLAY_GAME",t[t.DUEL_MODE=4]="DUEL_MODE",t[t.CHARACTER_LIST=5]="CHARACTER_LIST",t[t.LEVEL_LIST=6]="LEVEL_LIST",t[t.END=7]="END"})(i||(i={}));var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mState=i.NULL,e}var o;return r(e,t),o=e,Object.defineProperty(e,"Instance",{get:function(){return o.mInstance},enumerable:!1,configurable:!0}),e.prototype.onEnable=function(){this.mButtonCharacterList.on("click",this.OnClickButtonCharacterList,this),this.mButtonCharacterList_02.on("click",this.OnClickButtonCharacterList,this),this.mButtonPlay.on("click",this.OnClickButtonPlay,this),this.mButtonPlay_02.on("click",this.OnClickButtonPlay,this),this.mButtonDuel.on("click",this.OnClickButtonDuel,this),this.mButtonDuel_02.on("click",this.OnClickButtonDuel,this),this.mButtonLevel.on("click",this.OnClickButtonLevel,this)},e.prototype.onDisable=function(){this.mButtonCharacterList.off("click",this.OnClickButtonCharacterList,this),this.mButtonCharacterList_02.off("click",this.OnClickButtonCharacterList,this),this.mButtonPlay.off("click",this.OnClickButtonPlay,this),this.mButtonPlay_02.off("click",this.OnClickButtonPlay,this),this.mButtonDuel.off("click",this.OnClickButtonDuel,this),this.mButtonDuel_02.off("click",this.OnClickButtonDuel,this),this.mButtonLevel.off("click",this.OnClickButtonLevel,this)},e.prototype.onLoad=function(){o.mInstance=this},e.prototype.start=function(){this.SetState(i.END)},e.prototype.SetState=function(t){var e=this;switch(this.mState=t,this.mState){case i.INIT:this.mUIMainMenu.active=!0,this.mCharacterAvatarSprite.node.active=!1;var o=p.UserProfile.Instance.GetCurrentProfileCharacter();null!=o&&cc.resources.load(p.UserProfile.Instance.CHARACTER_ROOT_PATH+o.path,cc.SpriteFrame,null,function(t,o){e.mCharacterAvatarSprite.node.active=!0,e.mCharacterAvatarSprite.spriteFrame=o});break;case i.NORMAL:break;case i.PLAY_GAME:u.StateIngame.Instance.SetStateInit();break;case i.DUEL_MODE:c.MessageMgr.SendMessage(s.GAME_MESSAGE.STATE_DUEL_MODE_BET);break;case i.CHARACTER_LIST:l.StateCharacterList.Instance.SetStateInit();break;case i.LEVEL_LIST:h.StateLevelList.Instance.SetStateInit();break;case i.END:this.mUIMainMenu.active=!1}},e.prototype.update=function(){switch(this.mState){case i.INIT:this.SetState(i.NORMAL);break;case i.NORMAL:break;case i.PLAY_GAME:case i.DUEL_MODE:case i.CHARACTER_LIST:case i.LEVEL_LIST:this.SetState(i.END);break;case i.END:}},e.prototype.OnClickButtonCharacterList=function(){switch(this.mState){case i.NORMAL:this.SetState(i.CHARACTER_LIST)}},e.prototype.OnClickButtonPlay=function(){switch(this.mState){case i.NORMAL:p.UserProfile.Instance.GetMaxLevel()>=1&&this.SetState(i.PLAY_GAME)}},e.prototype.OnClickButtonDuel=function(){switch(this.mState){case i.NORMAL:this.SetState(i.DUEL_MODE)}},e.prototype.OnClickButtonLevel=function(){switch(this.mState){case i.NORMAL:this.SetState(i.LEVEL_LIST)}},e.prototype.SetStateInit=function(){switch(this.mState){case i.END:this.SetState(i.INIT)}},a([_(cc.Node)],e.prototype,"mUIMainMenu",void 0),a([_(cc.Node)],e.prototype,"mButtonCharacterList",void 0),a([_(cc.Node)],e.prototype,"mButtonCharacterList_02",void 0),a([_(cc.Node)],e.prototype,"mButtonPlay",void 0),a([_(cc.Node)],e.prototype,"mButtonPlay_02",void 0),a([_(cc.Node)],e.prototype,"mButtonLevel",void 0),a([_(cc.Node)],e.prototype,"mButtonDuel",void 0),a([_(cc.Node)],e.prototype,"mButtonDuel_02",void 0),a([_(cc.Sprite)],e.prototype,"mCharacterAvatarSprite",void 0),o=a([S],e)}(cc.Component);o.StateMainMenu=d,cc._RF.pop()},{"../GameDefine":"GameDefine","../MessageMgr":"MessageMgr","../UserProfile":"UserProfile","./StateCharacterList":"StateCharacterList","./StateIngame":"StateIngame","./StateLevelList":"StateLevelList"}],StateProfile:[function(t,e,o){"use strict";cc._RF.push(e,"d8712EVoYlIGYVQz9uOtSu/","StateProfile");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.StateProfile=void 0;var i,s=t("../UserProfile"),c=t("./StateMainMenu"),p=t("./StateRentCharacter"),l=cc._decorator,u=l.ccclass,h=l.property;(function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.CHECK_PROFILE=2]="CHECK_PROFILE",t[t.GO_TO_MAIN_MENU=3]="GO_TO_MAIN_MENU",t[t.GO_TO_RENT_CHARACTER=4]="GO_TO_RENT_CHARACTER",t[t.END=5]="END"})(i||(i={}));var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return r(e,t),o=e,Object.defineProperty(e,"Instance",{get:function(){return o.mInstance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){o.mInstance=this},e.prototype.start=function(){this.SetState(i.INIT)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case i.INIT:this.mUILoading.active=!0;break;case i.CHECK_PROFILE:break;case i.GO_TO_MAIN_MENU:this.mUILoading.active=!1,c.StateMainMenu.Instance.SetStateInit();break;case i.GO_TO_RENT_CHARACTER:this.mUILoading.active=!1,p.StateRentCharacter.Instance.SetStateInit();break;case i.END:}},e.prototype.update=function(){switch(this.mState){case i.INIT:this.SetState(i.CHECK_PROFILE);break;case i.CHECK_PROFILE:s.UserProfile.Instance.IsGetProfileFinish()&&this.SetState(s.UserProfile.Instance.IsHaveCharacter()?i.GO_TO_MAIN_MENU:i.GO_TO_RENT_CHARACTER);break;case i.GO_TO_MAIN_MENU:case i.GO_TO_RENT_CHARACTER:this.SetState(i.END);break;case i.END:}},e.prototype.Reset=function(){this.SetState(i.INIT)},a([h(cc.Node)],e.prototype,"mUILoading",void 0),o=a([u],e)}(cc.Component);o.StateProfile=f,cc._RF.pop()},{"../UserProfile":"UserProfile","./StateMainMenu":"StateMainMenu","./StateRentCharacter":"StateRentCharacter"}],StateRentCharacter:[function(t,e,o){"use strict";cc._RF.push(e,"885c3cJ9PhF9roc7GuCErPj","StateRentCharacter");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.StateRentCharacter=void 0;var i,s=t("../CharacterList/CharacterRentCard"),c=t("../UserProfile"),p=t("./StateMainMenu"),l=cc._decorator,u=l.ccclass,h=l.property;(function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.CREATE_CHARACTER_CARD=2]="CREATE_CHARACTER_CARD",t[t.SETUP_CHARACTER_CARD_INFO=3]="SETUP_CHARACTER_CARD_INFO",t[t.ACTIVE=4]="ACTIVE",t[t.BACK_TO_MAIN_MENU=5]="BACK_TO_MAIN_MENU",t[t.END=6]="END"})(i||(i={}));var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mIsCreateCharacterCards=!0,e}var o;return r(e,t),o=e,Object.defineProperty(e,"Instance",{get:function(){return o.mInstance},enumerable:!1,configurable:!0}),e.prototype.onEnable=function(){this.mButtonMainMenu.on("click",this.OnClickButtonMainMenu,this)},e.prototype.onDisable=function(){this.mButtonMainMenu.off("click",this.OnClickButtonMainMenu,this)},e.prototype.onLoad=function(){o.mInstance=this,this.mButtonMainMenu.active=!1},e.prototype.start=function(){this.SetState(i.END)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case i.INIT:this.mUI.active=!0;break;case i.CREATE_CHARACTER_CARD:this.CreateCharacterCard(),this.mIsCreateCharacterCards=!1;break;case i.SETUP_CHARACTER_CARD_INFO:this.SetupCharacterCardsInfo();break;case i.ACTIVE:break;case i.BACK_TO_MAIN_MENU:p.StateMainMenu.Instance.SetStateInit();break;case i.END:this.mUI.active=!1}},e.prototype.update=function(){switch(this.mState){case i.INIT:this.SetState(this.mIsCreateCharacterCards?i.CREATE_CHARACTER_CARD:i.SETUP_CHARACTER_CARD_INFO);break;case i.CREATE_CHARACTER_CARD:this.SetState(i.SETUP_CHARACTER_CARD_INFO);break;case i.SETUP_CHARACTER_CARD_INFO:this.SetState(i.ACTIVE);break;case i.ACTIVE:break;case i.BACK_TO_MAIN_MENU:this.SetState(i.END);break;case i.END:}},e.prototype.OnClickButtonMainMenu=function(){switch(this.mState){case i.ACTIVE:this.SetState(i.BACK_TO_MAIN_MENU)}},e.prototype.SetStateInit=function(){switch(this.mState){case i.END:this.SetState(i.INIT)}},e.prototype.SetStateSetupCharacterCardInfo=function(){switch(this.mState){case i.ACTIVE:this.SetState(i.SETUP_CHARACTER_CARD_INFO)}},e.prototype.ShowButtonMainMenu=function(){this.mButtonMainMenu.active=!0},e.prototype.CreateCharacterCard=function(){for(var t=c.UserProfile.Instance.GetUserAsset(),e=0;e<t.data.length;e++){var o=t.data[e],n=cc.instantiate(this.mPrefabCharacterCard);n.parent=this.mCharacterCardContainer;var r=n.getComponent(s.CharacterRentCard);r&&r.SetupAvatarInfo(c.UserProfile.Instance.CHARACTER_ROOT_PATH+o.path)}},e.prototype.SetupCharacterCardsInfo=function(){for(var t=c.UserProfile.Instance.GetUserAsset(),e=0;e<t.data.length;e++){var o=t.data[e],n=this.mCharacterCardContainer.children[e].getComponent(s.CharacterRentCard);n&&n.SetupAssetInfo(o)}},a([h(cc.Node)],e.prototype,"mUI",void 0),a([h(cc.Node)],e.prototype,"mCharacterCardContainer",void 0),a([h(cc.Prefab)],e.prototype,"mPrefabCharacterCard",void 0),a([h(cc.Node)],e.prototype,"mButtonMainMenu",void 0),o=a([u],e)}(cc.Component);o.StateRentCharacter=f,cc._RF.pop()},{"../CharacterList/CharacterRentCard":"CharacterRentCard","../UserProfile":"UserProfile","./StateMainMenu":"StateMainMenu"}],UIBulletMgr:[function(t,e,o){"use strict";cc._RF.push(e,"ebabcHHOUlMNpeWJDhvE8Mu","UIBulletMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.UIBulletMgr=void 0;var i=t("./UIBullet"),s=cc._decorator,c=s.ccclass,p=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.OFFSET_X=20,e}var o;return r(e,t),o=e,Object.defineProperty(e,"Instance",{get:function(){return o.mInstance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){o.mInstance=this},e.prototype.start=function(){},e.prototype.update=function(){},e.prototype.SetNumberBulletMax=function(t){for(this.mNumberBulletMax=t;this.node.childrenCount<this.mNumberBulletMax;)cc.instantiate(this.mPrefabUIBullet).parent=this.node;for(var e=0;e<this.node.childrenCount;e++)this.node.children[e].active=e<this.mNumberBulletMax;this.AlignUIBullet()},e.prototype.SetStarInfo=function(t,e,o){this.mNumberStar1=t,this.mNumberStar2=e,this.mNumberStar3=o;for(var n=0;n<this.mNumberBulletMax;n++){var r=this.node.children[n].getComponent(i.UIBullet);n>=this.mNumberStar3?r.SetStar(3):n>=this.mNumberStar2?r.SetStar(2):r.SetStar(1)}},e.prototype.SetNumberBulletCurrent=function(t){this.mNumberBulletCurrent=t;for(var e=this.mNumberBulletCurrent;e<this.mNumberBulletMax;e++)this.node.children[e].getComponent(i.UIBullet).SetStar(0)},e.prototype.GetStarResult=function(){return this.mNumberBulletCurrent>=this.mNumberStar3?3:this.mNumberBulletCurrent>=this.mNumberStar2?2:1},e.prototype.AlignUIBullet=function(){for(var t=0;t<this.mNumberBulletMax;t++)this.node.children[t].x=(t-(this.mNumberBulletMax-1)/2)*this.OFFSET_X},a([p(cc.Prefab)],e.prototype,"mPrefabUIBullet",void 0),o=a([c],e)}(cc.Component);o.UIBulletMgr=l,cc._RF.pop()},{"./UIBullet":"UIBullet"}],UIBullet:[function(t,e,o){"use strict";cc._RF.push(e,"4cc2bVVnXtO9Y7u4wmncXMV","UIBullet");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.UIBullet=void 0;var i=cc._decorator,s=i.ccclass,c=i.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mArrSpriteFrame=[],e}return r(e,t),e.prototype.start=function(){},e.prototype.SetStar=function(t){t=Math.min(Math.max(t,0),this.mArrSpriteFrame.length-1),this.mSpriteFg.spriteFrame=this.mArrSpriteFrame[t]},a([c(cc.Sprite)],e.prototype,"mSpriteFg",void 0),a([c({type:[cc.SpriteFrame]})],e.prototype,"mArrSpriteFrame",void 0),a([s],e)}(cc.Component);o.UIBullet=p,cc._RF.pop()},{}],UserControl:[function(t,e,o){"use strict";cc._RF.push(e,"8440brvZh1ETKjt9uJWVewB","UserControl");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.UserControl=void 0;var i,s=t("../GameDefine"),c=t("./Player"),p=cc._decorator,l=p.ccclass;p.property,function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.ACTIVE=2]="ACTIVE"}(i||(i={}));var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onEnable=function(){var t=s.GameDefine.GetGameContainer();t&&(t.on(cc.Node.EventType.MOUSE_DOWN,this.OnMouseDown,this),t.on(cc.Node.EventType.MOUSE_MOVE,this.OnMouseMove,this),t.on(cc.Node.EventType.MOUSE_UP,this.OnMouseUp,this),t.on(cc.Node.EventType.TOUCH_START,this.OnMouseDown,this),t.on(cc.Node.EventType.TOUCH_MOVE,this.OnMouseMove,this),t.on(cc.Node.EventType.TOUCH_END,this.OnMouseUp,this),t.on(cc.Node.EventType.TOUCH_CANCEL,this.OnMouseUp,this))},e.prototype.onDisable=function(){var t=s.GameDefine.GetGameContainer();t&&(t.off(cc.Node.EventType.MOUSE_DOWN,this.OnMouseDown,this),t.off(cc.Node.EventType.MOUSE_MOVE,this.OnMouseMove,this),t.off(cc.Node.EventType.MOUSE_UP,this.OnMouseUp,this),t.off(cc.Node.EventType.TOUCH_START,this.OnMouseDown,this),t.off(cc.Node.EventType.TOUCH_MOVE,this.OnMouseMove,this),t.off(cc.Node.EventType.TOUCH_END,this.OnMouseUp,this),t.off(cc.Node.EventType.TOUCH_CANCEL,this.OnMouseUp,this))},e.prototype.start=function(){this.SetState(i.INIT)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case i.INIT:this.mPlayer=this.node.getComponent(c.Player);break;case i.ACTIVE:}},e.prototype.update=function(){switch(this.mState){case i.INIT:this.SetState(i.ACTIVE);break;case i.ACTIVE:}},e.prototype.OnMouseDown=function(t){switch(this.mState){case i.ACTIVE:this.mPlayer.SetAimPosition(t.getLocation()),this.mPlayer.SetStateAim()}},e.prototype.OnMouseMove=function(t){switch(this.mState){case i.ACTIVE:this.mPlayer.SetAimPosition(t.getLocation())}},e.prototype.OnMouseUp=function(){switch(this.mState){case i.ACTIVE:this.mPlayer.SetStateShoot()}},a([l],e)}(cc.Component);o.UserControl=u,cc._RF.pop()},{"../GameDefine":"GameDefine","./Player":"Player"}],UserProfile:[function(t,e,o){"use strict";cc._RF.push(e,"5b2f64oTwBId5rdNYeea8pD","UserProfile");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.UserProfile=void 0;var i,s=t("./API"),c=t("./GameDefine"),p=cc._decorator,l=p.ccclass;p.property,function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.GET_TOKEN=2]="GET_TOKEN",t[t.GET_PROFILE_FROM_SERVER=3]="GET_PROFILE_FROM_SERVER",t[t.GET_PROFILE_FINISH=4]="GET_PROFILE_FINISH"}(i||(i={}));var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.CHARACTER_ROOT_PATH="Sprites/CharacterAvatar/",e}var o;return r(e,t),o=e,Object.defineProperty(e,"Instance",{get:function(){return this.mInstance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){o.mInstance=this},e.prototype.start=function(){this.SetState(i.INIT)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case i.INIT:case i.GET_TOKEN:break;case i.GET_PROFILE_FROM_SERVER:this.GetProfileFromServer(),this.GetUserAssetFromServer(),this.GetGameDetailsFromServer(),this.LoadLevelJson();break;case i.GET_PROFILE_FINISH:}},e.prototype.update=function(){switch(this.mState){case i.INIT:this.SetState(i.GET_TOKEN);break;case i.GET_TOKEN:this.SetState(i.GET_PROFILE_FROM_SERVER);break;case i.GET_PROFILE_FROM_SERVER:null!=this.mProfileFromServer&&null!=this.mUserAssetFromServer&&null!=this.mGameDetailsFromServer&&null!=this.mLevelInfo&&this.SetState(i.GET_PROFILE_FINISH);break;case i.GET_PROFILE_FINISH:}},e.prototype.Reset=function(){this.SetState(i.INIT)},e.prototype.GetUserAsset=function(){return this.mUserAssetFromServer},e.prototype.GetCurrentCharacterId=function(){return this.mCurrentCharId},e.prototype.SetCurrentCharacterId=function(t){this.mCurrentCharId=t,s.API.Instance.SetCurrentAsset({gameId:s.API.Instance.GAME_ID,currentAssetIds:t})},e.prototype.GetCurrentProfileCharacter=function(){for(var t=0;t<this.mUserAssetFromServer.data.length;t++)if(this.mUserAssetFromServer.data[t].assetId==this.mCurrentCharId)return this.mUserAssetFromServer.data[t];return null},e.prototype.GetRandomProfileForBot=function(){var t=Math.floor(this.mUserAssetFromServer.data.length*Math.random());return this.mUserAssetFromServer.data[t]},e.prototype.GetCurrentCharacterLoadingInfo=function(t){var e={prefabUrl:"Prefab/Player/Player_01_Rosen"};switch(t){case"Rosen":e.prefabUrl="Prefab/Player/Player_01_Rosen";break;case"80Guy":e.prefabUrl="Prefab/Player/Player_02_80Guy";break;case"ABones":e.prefabUrl="Prefab/Player/Player_03_ABones";break;case"BollyDude":e.prefabUrl="Prefab/Player/Player_04_BollyDude";break;case"Clown":e.prefabUrl="Prefab/Player/Player_05_Clown";break;case"DudeBlack":e.prefabUrl="Prefab/Player/Player_06_DudeBlack";break;case"Gangster":e.prefabUrl="Prefab/Player/Player_07_Gangster";break;case"Horse":e.prefabUrl="Prefab/Player/Player_08_Horse";break;case"Mitch":e.prefabUrl="Prefab/Player/Player_09_Mitch";break;case"Mummy":e.prefabUrl="Prefab/Player/Player_10_Mummy";break;case"Naomi":e.prefabUrl="Prefab/Player/Player_11_Naomi";break;case"Punk":e.prefabUrl="Prefab/Player/Player_12_Punk";break;case"Rapper":e.prefabUrl="Prefab/Player/Player_13_Rapper";break;case"Spacegirl":e.prefabUrl="Prefab/Player/Player_14_Spacegirl";break;case"Unicorn":e.prefabUrl="Prefab/Player/Player_15_Unicorn";break;case"Wrestler":e.prefabUrl="Prefab/Player/Player_16_Wrestler"}return e},e.prototype.IsGetProfileFinish=function(){return this.mState==i.GET_PROFILE_FINISH},e.prototype.GetRandomProfileCharacterNotFullCard=function(){for(var t=[],e=0;e<this.mUserAssetFromServer.data.length;e++){var o=this.mUserAssetFromServer.data[e];!o.status&&o.card<o.maxCard&&t.push(o)}return t.length>0?t[Math.floor(Math.random()*t.length)]:null},e.prototype.GetAssetInfoByAssetId=function(t){for(var e=0;e<this.mUserAssetFromServer.data.length;e++)if(this.mUserAssetFromServer.data[e].assetId==t)return this.mUserAssetFromServer.data[e]},e.prototype.GetCurrentMap=function(){return this.mProfileInfo.map},e.prototype.GetCurrentLevel=function(){console.log("this.mProfileInfo.level"),console.log(this.mProfileInfo.level);var t=this.mProfileInfo.level;return(t>this.GetMaxLevel()||t<=0)&&(t=1,this.SetCurrentLevel(t)),t},e.prototype.SetCurrentLevel=function(t){this.mProfileInfo.level=Math.max(t,1)},e.prototype.AddCurrentLevel=function(t){this.SetCurrentLevel(this.GetCurrentLevel()+t)},e.prototype.GetMaxLevel=function(){return this.mLevelInfo.length},e.prototype.GetCurrentLevelInfo=function(){return this.mLevelInfo[this.GetCurrentLevel()-1]},e.prototype.GetMaxDuelModeLevel=function(){return 3},e.prototype.IsHaveCharacter=function(){console.log("IsHaveCharacter"),console.log(this.mUserAssetFromServer);var t=!1;return this.mUserAssetFromServer.data.forEach(function(e){t=t||e.status||e.rentStatus}),c.GameDefine.IS_DEBUG,t},e.prototype.GetProfileFromServer=function(){var t=this;this.mProfileFromServer=null,s.API.Instance.GetUserProfile().then(function(e){console.log("GetProfileFromServer"),console.log(e.responseText);try{t.mProfileFromServer=JSON.parse(e.responseText),t.mProfileFromServer.data.level+=1,console.log(t.mProfileFromServer),t.mProfileFromServer.data.gameId==s.API.Instance.GAME_ID&&(t.mProfileInfo=t.mProfileFromServer.data),t.mCurrentCharId=t.mProfileInfo.currentAssetIds[0],console.log(t.mProfileInfo),console.log(t.mCurrentCharId)}catch(o){cc.error(o)}}).catch()},e.prototype.GetUserAssetFromServer=function(){var t=this;this.mUserAssetFromServer=null,s.API.Instance.GetUserAsset().then(function(e){console.log("GetUserAssetFromServer");try{t.mUserAssetFromServer=JSON.parse(e.responseText),console.log(t.mUserAssetFromServer)}catch(o){}}).catch()},e.prototype.GetGameDetailsFromServer=function(){var t=this;this.mGameDetailsFromServer=null,s.API.Instance.GetGameDetails().then(function(e){console.log("GetGameDetails"),console.log(e.responseText),console.log(JSON.parse(e.responseText));try{t.mGameDetailsFromServer=JSON.parse(e.responseText)}catch(o){}}).catch()},e.prototype.LoadLevelJson=function(){var t=this;this.mLevelInfo=null,cc.resources.load(c.GameDefine.IS_DEBUG?"Json/level_test":"Json/level",cc.JsonAsset,function(e,o){console.log("LoadLevelJson");try{t.mLevelInfo=o.json.levelInfo,console.log(t.mLevelInfo)}catch(e){}})},o=a([l],e)}(cc.Component);o.UserProfile=u,cc._RF.pop()},{"./API":"API","./GameDefine":"GameDefine"}]},{},["API","CharacterCard","CharacterRentCard","GameDefine","GameSetup","AutoSnapToGrid","BodyCollider","BotControl","BoxNumberContainer","BoxNumberSpriteControl","BulletGravity","BulletNormal","BulletSplit","BulletSplitControl","BulletSplitSub","BulletStats","Bullet_14","Bullet_16","Enemy","EnemySetup","EnemyStats","Explosive","ItemSplitBullet","LevelMgr","LevelSetup","ObstacleBomb","ObstacleBombStats","ObstacleBox","ObstacleBoxStats","ParticleSystemRotate","PlatformMoving","PlatformMovingSetup","PlatformSwitch","PlatformSwitchButton","PlatformSwitchButtonSetup","PlatformSwitchSetup","Player","PlayerAimRay","PlayerAimTarget","PlayerCreator","PlayerHealthBar","PlayerSetup","PlayerSpine","PlayerStats","RagDoll","ReadyAimIndicator","SpineDetroy","UIBullet","UIBulletMgr","UserControl","ButtonLevel","MessageMgr","PopupMgr","PopupAssetError","PopupNotEnoughPoint","PopupRentCharacter","StateCharacterList","StateDuelMode","StateDuelModeBet","StateDuelModeDraw","StateDuelModeLose","StateDuelModeWin","StateEndGameLose","StateEndGameWin","StateIngame","StateLevelList","StateMainMenu","StateProfile","StateRentCharacter","UserProfile"]);